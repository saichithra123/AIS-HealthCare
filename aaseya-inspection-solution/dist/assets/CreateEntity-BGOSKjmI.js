import{r as s,j as e,c as g,a as j,u as C,Q as y,v as E,G as i,T as u,e as v}from"./index-CsrR-wrF.js";import{u as w,M as b,a as M,A as S,b as B,C as A,c as I}from"./index.modern-B3mHbnex.js";const L=({controlPosition:t,onPlaceSelect:r})=>{const[n,a]=s.useState(null),c=s.useRef(null),o=w("places");return s.useEffect(()=>{if(!o||!c.current)return;const l={fields:["geometry","name","formatted_address"]};a(new o.Autocomplete(c.current,l))},[o]),s.useEffect(()=>{n&&n.addListener("place_changed",()=>{r(n.getPlace())})},[r,n]),e.jsx(e.Fragment,{children:e.jsx(b,{position:t,className:"mapControlInput",children:e.jsx("div",{className:"inputContainer",children:e.jsx("input",{ref:c,className:"searchfield",placeholder:"Search Entity"})})})})},N=({place:t})=>{const r=M();return s.useEffect(()=>{var n,a;!r||!t||(n=t.geometry)!=null&&n.viewport&&r.fitBounds((a=t.geometry)==null?void 0:a.viewport)},[r,t]),null},R=g(e.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"LocationOn"),H=()=>{var d,p,x,m;const[t,r]=s.useState(null),[n,a]=s.useState(!1),c=j(),o=C(),{isCreateEntity:l,inspectionType:f}=o==null?void 0:o.state,{header:T,setHeader:h}=s.useContext(y);return s.useEffect(()=>{h("Create Entity")},[]),s.useEffect(()=>{t!=null&&t.name&&a(!0)},[t]),e.jsxs(e.Fragment,{children:[e.jsxs(S,{apiKey:"AIzaSyBQxm8r5snp8ssmU7-HK6CqxStnmdWR9mI",children:[e.jsx(B,{style:{width:"100%",height:"100vh",borderRadius:"20px"},defaultCenter:{lat:22.54992,lng:0},defaultZoom:3,gestureHandling:"greedy",disableDefaultUI:!0}),e.jsx(L,{style:{width:"100%"},controlPosition:A.TOP_LEFT,onPlaceSelect:r}),e.jsx(I,{position:{lat:(p=(d=t==null?void 0:t.geometry)==null?void 0:d.location)==null?void 0:p.lat(),lng:(m=(x=t==null?void 0:t.geometry)==null?void 0:x.location)==null?void 0:m.lng()},clickable:!0,title:t==null?void 0:t.name}),e.jsx(N,{place:t})]}),e.jsx(E,{open:n,onClose:()=>a(!1),anchor:"bottom",variant:"persistent",className:"addressDrawer",children:e.jsxs(i,{container:!0,sx:{p:3},children:[e.jsx(i,{sx:{mb:3},children:e.jsx(u,{color:"#4C8B92",variant:"h6",children:"Creating case for Entity"})}),e.jsxs(i,{container:!0,sx:{mb:3},children:[e.jsx(i,{size:2,children:e.jsx(R,{sx:{color:"#4C8B92",fontSize:"50px"}})}),e.jsxs(i,{size:10,children:[e.jsx(u,{variant:"h5",fontWeight:700,my:1,children:t==null?void 0:t.name}),e.jsx(u,{children:t==null?void 0:t.formatted_address})]})]}),e.jsx(i,{container:!0,sx:{"& .MuiButtonBase-root:hover":{backgroundColor:"#4C8B92"}},children:e.jsx(v,{sx:{backgroundColor:"#4C8B92",textTransform:"none",borderRadius:"20px",width:"100%",height:"40px"},onClick:()=>{a(!1),c("/cases/new",{state:{newEntityAddress:JSON.stringify(t),isCreateEntity:l,inspectionType:f}})},children:"Fill Entity details"})})]})})]})};export{H as default};
