import{b as y,j as e,T as m,B as c,a5 as rt,N as ut,a6 as dt,r as o,G as i,h as re,M as Y,f as tt,A as nt,g as st,i as R,e as pe,m as lt,aE as St,D as fe,R as Mt,aF as ge,a7 as wt,aG as ie,aH as Et,a as Rt,u as It,S as Tt,o as L,K as Gt,L as kt,F as Dt,E as zt,H as le}from"./index-CsrR-wrF.js";import{R as Ft,C as at}from"./CustomRadio-DaMEwieZ.js";/* empty css                    */import{A as Nt}from"./PlaylistAddOutlined-CpSMRKtR.js";import{C as Pt}from"./Check-cGaUIAku.js";import{C as $t}from"./Close-CoWB75cj.js";import{G as Ot}from"./GridToolbarContainer-BVoBlSP0.js";import{G as ot}from"./GridActionsCellItem-uDNmMIfu.js";const Wt=({entities:t,selectedEntities:x,setSelectedEntities:p,entityPage:h,setEntityPage:v,entityPageSize:f,setEntityPageSize:s,totalEntityPages:b,totalEntityRecords:C,loadingEntities:D})=>{const w=y(),U=[{field:"id",headerName:"Entity Id",flex:.3},{field:"name",headerName:"Entity Name",flex:.5},{field:"address",headerName:"Address",flex:1}];return e.jsxs(e.Fragment,{children:[e.jsx(m,{sx:{color:w.palette.colors[21],fontSize:"14px",mt:3},children:"Entity"}),e.jsx(c,{sx:{pt:1,height:"400px",".MuiDataGrid-columnHeader":{backgroundColor:`${w.palette.colors[18]}`},".MuiDataGrid-root":{borderRadius:"10px 10px 0px 0px",border:"0px !important",borderColor:"white !important","--DataGrid-rowBorderColor":"#ffffff"},".MuiDataGrid-main":{borderRadius:"10px 10px 0px 0px"},"& .MuiDataGrid-columnsContainer, .MuiDataGrid-cell":{borderBottom:"0px !important",borderTop:"0px !important"}," .MuiDataGrid-row":{border:`1px solid ${w.palette.colors[22]}`,borderRadius:"6px",my:"1px"}," .MuiDataGrid-overlay":{border:`1px solid ${w.palette.colors[22]}`,borderRadius:"6px",my:"1px"},".MuiDataGrid-columnHeaders .MuiDataGrid-scrollbarFiller":{backgroundColor:`${w.palette.colors[18]}`}," .MuiDataGrid-scrollbar":{display:"none"},".MuiDataGrid-footerContainer":{borderTop:"0px"},".MuiDataGrid-selectedRowCount":{display:"none"}},children:e.jsx(rt,{columns:U,rows:t,loading:D,checkboxSelection:!0,rowSelectionModel:x,onRowSelectionModelChange:z=>p(z),disableRowSelectionOnClick:!0,slots:{baseCheckbox:ut,pagination:()=>e.jsx(dt,{page:h,setPage:v,pageSize:f,setPageSize:s,totalPages:b,totalRecords:C})},getRowId:z=>z.id})})]})},Bt=({periodicity:t,setPeriodicity:x})=>{y(),o.useState(null),o.useState(null),o.useState(""),o.useState(1),o.useState(1),o.useState(),o.useState(),o.useState(""),o.useState(null),o.useState(null),o.useState(null);const p=[{value:"Sunday",name:"Su"},{value:"Monday",name:"Mo"},{value:"Tuesday",name:"Tu"},{value:"Wednesday",name:"We"},{value:"Thursday",name:"Th"},{value:"Friday",name:"Fr"},{value:"Saturday",name:"Sa"}],h=s=>s%10===1&&s%100!==11?"st":s%10===2&&s%100!==12?"nd":s%10===3&&s%100!==13?"rd":"th",v=s=>{x({...t,inspectionStartDate:s})},f=s=>{x({...t,inspectionEndDate:s})};return e.jsxs(e.Fragment,{children:[e.jsx(c,{marginBottom:"100px",sx:{mt:3,mb:3},children:e.jsxs(i,{container:!0,spacing:2,alignItems:"center",children:[e.jsxs(i,{size:4,sx:{".MuiInputBase-root":{borderRadius:"20px",boxShadow:"inset 0px 3px 6px #00000029",border:"1px solid #CCCCCC",height:"40px"}},children:[e.jsx(m,{children:"Occurrence"}),e.jsxs(re,{className:"inputFields",fullWidth:!0,value:t==null?void 0:t.occurence,onChange:s=>x({...t,occurence:s.target.value}),children:[e.jsx(Y,{value:"NOREPEAT",children:"Don't Repeat"}),e.jsx(Y,{value:"WEEK",children:"Weekly"}),e.jsx(Y,{value:"MONTH",children:"Monthly"}),e.jsx(Y,{value:"CUSTOM",children:"Custom"})]})]}),(t==null?void 0:t.occurence)!=="NOREPEAT"&&e.jsxs(e.Fragment,{children:[e.jsxs(i,{size:4,children:[e.jsx(m,{children:"Start Date"}),e.jsx(tt,{dateAdapter:nt,children:e.jsx(st,{className:"inputFields",value:t==null?void 0:t.inspectionStartDate,onChange:v,format:"DD MMM YYYY",sx:{width:"100%"}})})]}),e.jsxs(i,{size:4,children:[e.jsx(m,{children:"End Date"}),e.jsx(tt,{dateAdapter:nt,children:e.jsx(st,{className:"inputFields",value:t==null?void 0:t.inspectionEndDate,onChange:f,format:"DD MMM YYYY",sx:{width:"100%"}})})]})]})]})}),(t==null?void 0:t.occurence)==="WEEK"&&e.jsxs(c,{children:[e.jsx(m,{children:"Repeats Every"}),e.jsxs(i,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(i,{size:3,children:e.jsx(R,{type:"number",className:"inputFields",value:t==null?void 0:t.everyWeek,onChange:s=>x({...t,everyWeek:s.target.value}),fullWidth:!0})}),e.jsx(i,{size:2,children:e.jsx(m,{sx:{fontSize:"14px !important"},children:"Week"})})]}),e.jsx(c,{mt:3,children:e.jsx(c,{display:"flex",gap:2,mt:1,children:p.map(s=>e.jsx(pe,{onClick:()=>x({...t,selectedDay:s==null?void 0:s.value}),sx:{maxWidth:"40px",minWidth:"40px",height:"40px",borderRadius:"6px",border:"1px solid #CCCCCC",fontWeight:(t==null?void 0:t.selectedDay)===(s==null?void 0:s.value)?600:400,color:((t==null?void 0:t.selectedDay)===(s==null?void 0:s.value),"#000"),backgroundColor:(t==null?void 0:t.selectedDay)===(s==null?void 0:s.value)?"#C5DBDE":"#FFFFFF",borderColor:(t==null?void 0:t.selectedDay)===(s==null?void 0:s.value)?"#C5DBDE":"#CCCCCC","&:hover":{backgroundColor:(t==null?void 0:t.selectedDay)===(s==null?void 0:s.value)?"#C5DBDE":"#FFFFFF"}},children:s==null?void 0:s.name},s==null?void 0:s.value))})}),(t==null?void 0:t.selectedDay)&&e.jsx(c,{mt:3,children:e.jsxs(m,{sx:{color:"#4C8B92 !important",fontSize:"14px !important"},children:[" ","Occurs on ",t==null?void 0:t.selectedDay," of every week"," "]})})]}),(t==null?void 0:t.occurence)==="MONTH"&&e.jsxs(c,{children:[e.jsx(m,{children:"Repeats Every"}),e.jsxs(i,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(i,{size:3,children:e.jsx(R,{type:"number",className:"inputFields",value:t==null?void 0:t.everyMonth,onChange:s=>x({...t,everyMonth:s.target.value}),fullWidth:!0})}),e.jsx(i,{size:2,children:e.jsx(m,{sx:{fontSize:"14px !important"},children:"Month"})})]}),e.jsx(c,{children:e.jsxs(Ft,{value:t==null?void 0:t.selectedOption,onChange:s=>x({...t,selectedOption:s.target.value}),children:[e.jsxs(i,{container:!0,alignItems:"center",direction:"row",mt:3,children:[e.jsx(lt,{value:"onDay",control:e.jsx(at,{}),label:"On Day",sx:{mr:4}}),e.jsx(R,{type:"number",className:"inputFields",value:t==null?void 0:t.onDay,onChange:s=>x({...t,onDay:s.target.value}),sx:{width:"300px",ml:1},disabled:(t==null?void 0:t.selectedOption)!=="onDay"})]}),e.jsxs(i,{container:!0,alignItems:"center",direction:"row",mt:2,children:[e.jsx(lt,{value:"onEvery",control:e.jsx(at,{}),label:"On Every",sx:{mr:4}}),e.jsx(c,{className:"inputFields",children:e.jsxs(i,{display:"flex",mt:1,children:[e.jsx(re,{value:t==null?void 0:t.week,onChange:s=>x({...t,week:s.target.value}),sx:{width:"150px",borderTopRightRadius:"0 !important",borderBottomRightRadius:"0 !important"},disabled:(t==null?void 0:t.selectedOption)!=="onEvery",children:["First","Second","Third","Fourth","Fifth"].map(s=>e.jsxs(Y,{value:s,children:[" ",s," "]},s))}),e.jsx(re,{value:t==null?void 0:t.weekday,onChange:s=>x({...t,weekday:s.target.value}),sx:{width:"150px",borderTopLeftRadius:"0 !important",borderBottomLeftRadius:"0 !important"},disabled:(t==null?void 0:t.selectedOption)!=="onEvery",children:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map(s=>e.jsxs(Y,{value:s,children:[" ",s," "]},s))})]})})]}),(t==null?void 0:t.selectedOption)==="onDay"&&(t==null?void 0:t.onDay)&&e.jsx(c,{mt:2,children:e.jsxs(m,{style:{color:"#4C8B92"},children:[" ","Occurs on every ",t==null?void 0:t.onDay,h(t==null?void 0:t.onDay)," day of every month."]})}),(t==null?void 0:t.selectedOption)==="onEvery"&&(t==null?void 0:t.week)&&(t==null?void 0:t.weekday)&&e.jsx(c,{mt:2,children:e.jsxs(m,{style:{color:"#4C8B92"},children:[" ","Occurs on ",t==null?void 0:t.week," ",t==null?void 0:t.weekday," of every month."," "]})})]})})]}),(t==null?void 0:t.occurence)==="CUSTOM"&&e.jsxs(c,{children:[e.jsx(m,{children:"Repeats Every"}),e.jsxs(i,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(i,{size:3,children:e.jsx(R,{type:"number",className:"inputFields",value:t==null?void 0:t.specificDay,onChange:s=>x({...t,specificDay:s.target.value}),fullWidth:!0})}),e.jsx(i,{size:2,children:e.jsx(m,{sx:{fontSize:"14px !important"},children:"Day"})})]}),(t==null?void 0:t.specificDay)&&e.jsx(c,{mt:2,children:e.jsxs(m,{style:{color:"#4C8B92"},children:[" ","Occurs on every ",t==null?void 0:t.specificDay,h(t==null?void 0:t.specificDay)," day"," "]})})]})]})};function Ht({SLAData:t,setSLAData:x}){const p=y(),h=["Small","Medium","Large"],v=(f,s,b,C)=>{x(D=>({...D,[f]:{...D[f],[s.toLowerCase()]:{...D[f][s.toLowerCase()],[b.toLowerCase()]:C}}}))};return e.jsx("form",{style:{marginTop:"24px"},children:h.map((f,s)=>e.jsxs(c,{sx:{mb:2,p:1,backgroundColor:p.palette.colors[1],borderRadius:"8px"},children:[e.jsxs(m,{sx:{color:p.palette.colors[21],fontSize:"14px",mb:1},variant:"h4",children:["Entity Size: ",f]}),e.jsx(St,{direction:"row",spacing:4,children:["Inspector","Reviewer","Approver"].map(b=>e.jsxs(c,{sx:{textAlign:"left",width:"33%"},children:[e.jsx(m,{variant:"body1",sx:{color:p.palette.colors[21],mb:1,fontSize:"12px"},children:b}),e.jsxs(c,{sx:{display:"flex",border:`1px solid ${p.palette.colors[22]}`,borderRadius:"15px",overflow:"hidden",width:"100%",boxShadow:`inset 0px 3px 6px ${p.palette.colors[3]}`},children:[e.jsx(R,{variant:"outlined",placeholder:"Goal",value:t[f][b.toLowerCase()].goal||"",onChange:C=>v(f,b,"goal",C.target.value),sx:{flex:1,borderRight:`1px solid ${p.palette.colors[22]}`,"& fieldset":{border:"none"},"& .MuiOutlinedInput-input":{padding:"7px 14px",fontSize:"12px",textAlign:"right"},"& .MuiOutlinedInput-input::placeholder":{color:p.palette.colors[21]}}}),e.jsx(R,{variant:"outlined",placeholder:"Deadline",value:t[f][b.toLowerCase()].deadline||"",onChange:C=>v(f,b,"deadline",C.target.value),sx:{flex:1,"& fieldset":{border:"none"},"& .MuiOutlinedInput-input":{padding:"7px 14px",fontSize:"12px",textAlign:"right"},"& .MuiOutlinedInput-input::placeholder":{color:p.palette.colors[21]}}})]})]},b.toLowerCase()))}),s!==h.length-1&&e.jsx(fe,{sx:{mt:3,borderColor:p.palette.colors[22],borderWidth:1}})]},f))})}const Yt=({inspectionType:t,primarydetails:x,setPrimaryDetails:p,skills:h,setSkills:v,selectedSkills:f,setSelectedSkills:s,skillPage:b,setSkillPage:C,skillPageSize:D,setSkillPageSize:w,totalSkillPages:U,totalSkillRecords:z,loadingSkills:F})=>{const E=y(),[M,B]=o.useState({}),l=[{field:"skill",headerName:"Skills",flex:.5,colSpan:(r,d)=>d!=null&&d.isNew?2:1,editable:!0,renderEditCell:r=>e.jsx(K,{...r})},{field:"inspectiontype",headerName:"Inspection Type",flex:1,renderCell:r=>{var d,S;return e.jsx(e.Fragment,{children:(S=(d=r.row)==null?void 0:d.inspectiontype)==null?void 0:S.map($=>e.jsx(wt,{sx:{borderRadius:"4px",mr:1,height:"26px"},label:$},$))})}}],K=r=>{const{id:d,field:S,value:$,api:V}=r,N=_=>{V.setEditCellValue({id:d,field:S,value:_.target.value})};return e.jsxs(c,{display:"flex",pt:.5,sx:{width:"100%"},children:[e.jsx(R,{size:"small",sx:{ml:.5},fullWidth:!0,className:"tableFields",value:$,onChange:N}),e.jsx(ot,{icon:e.jsx($t,{sx:{color:"#d54b4b",fontWeight:"bold"}}),label:"Cancel",sx:{color:"primary.main"},onClick:ne(d)}),e.jsx(ot,{icon:e.jsx(Pt,{sx:{color:"#03911a",fontWeight:"bold"}}),label:"Save",className:"textPrimary",onClick:q(d),color:"inherit"})]})},ue=Mt.memo(r=>{const{setSkills:d,setRowModesModel:S}=r,$=()=>{const V=h==null?void 0:h.reduce((N,_)=>Math.max(N,_.skillId),0);d(N=>[{skillId:V+1,skill:"",inspectiontype:[t],isNew:!0},...N]),S(N=>({...N,[V+1]:{mode:ie.Edit,fieldToFocus:"correctiveAction"}}))};return e.jsx(Ot,{children:e.jsxs(c,{className:"addButtonContainer",mb:1,onClick:$,children:[e.jsx(Nt,{sx:{mr:1}}),e.jsx(m,{className:"typographyFontWeight",children:"Add Skills"})]})})}),de=r=>{B(r)},ee=(r,d)=>{r.reason===Et.rowFocusOut&&(d.defaultMuiPrevented=!0)},te=r=>{const d={...r,isNew:!1};return v(h.map(S=>S.skillId===r.skillId?d:S)),d},q=r=>()=>{B({...M,[r]:{mode:ie.View}})},ne=r=>()=>{B({...M,[r]:{mode:ie.View,ignoreModifications:!0}}),v(h.filter(d=>(d==null?void 0:d.id)!==r))},H=r=>{const d=r.replace(/[^0-9]/g,""),S=[];return d.length>0&&S.push(d.slice(0,2)),d.length>2&&S.push(d.slice(2,4)),S.join(":")};return e.jsxs(c,{sx:{mt:3,"& .MuiTypography-root":{fontSize:"12px",color:E.palette.colors[21]}},children:[e.jsxs(i,{container:!0,spacing:2,children:[e.jsxs(i,{size:{xs:12,md:6,lg:4},children:[e.jsx(m,{children:"Efforts (for small size)"}),e.jsx(R,{value:x==null?void 0:x.smallEffort,onChange:r=>p(d=>({...d,smallEffort:H(r.target.value)})),fullWidth:!0,size:"small",type:"text",slotProps:{input:{endAdornment:e.jsx(ge,{position:"end",sx:{color:E.palette.colors[21]},children:"hh:mm"})}},className:"inputFields"})]}),e.jsxs(i,{size:{xs:12,md:6,lg:4},children:[e.jsx(m,{children:"Efforts (for medium size)"}),e.jsx(R,{value:x==null?void 0:x.mediumEffort,onChange:r=>p(d=>({...d,mediumEffort:H(r.target.value)})),fullWidth:!0,size:"small",type:"text",slotProps:{input:{endAdornment:e.jsx(ge,{position:"end",sx:{color:E.palette.colors[21]},children:"hh:mm"})}},className:"inputFields"})]}),e.jsxs(i,{size:{xs:12,md:6,lg:4},children:[e.jsx(m,{children:"Efforts (for large size)"}),e.jsx(R,{value:x==null?void 0:x.largeEffort,onChange:r=>p(d=>({...d,largeEffort:H(r.target.value)})),fullWidth:!0,size:"small",type:"text",slotProps:{input:{endAdornment:e.jsx(ge,{position:"end",sx:{color:E.palette.colors[21]},children:"hh:mm"})}},className:"inputFields"})]})]}),e.jsx(fe,{sx:{my:3}}),e.jsx(m,{sx:{fontSize:"14px",color:E.palette.colors[21],mb:1},children:"Skills"}),e.jsx(c,{sx:{pt:1,display:"flex",flexDirection:"column",gap:1},children:e.jsx(c,{sx:{height:"400px",".MuiDataGrid-columnHeader":{backgroundColor:`${E.palette.colors[18]}`},".MuiDataGrid-root":{borderRadius:"10px 10px 0px 0px",border:"0px !important",borderColor:"white !important","--DataGrid-rowBorderColor":"#ffffff"},".MuiDataGrid-main":{borderRadius:"10px 10px 0px 0px"},"& .MuiDataGrid-columnsContainer, .MuiDataGrid-cell":{borderBottom:"0px !important",borderTop:"0px !important"}," .MuiDataGrid-row":{border:`1px solid ${E.palette.colors[22]}`,borderRadius:"6px",my:"1px"}," .MuiDataGrid-overlay":{border:`1px solid ${E.palette.colors[22]}`,borderRadius:"6px",my:"1px"},".MuiDataGrid-columnHeaders .MuiDataGrid-scrollbarFiller":{backgroundColor:`${E.palette.colors[18]}`}," .MuiDataGrid-scrollbar":{display:"none"},".MuiDataGrid-footerContainer":{borderTop:"0px"},".MuiDataGrid-selectedRowCount":{display:"none"}},children:e.jsx(rt,{columns:l,rows:h,loading:F,getRowId:r=>r==null?void 0:r.skillId,slots:{baseCheckbox:ut,pagination:()=>e.jsx(dt,{page:b,setPage:C,pageSize:D,setPageSize:w,totalPages:U,totalRecords:z}),toolbar:ue},rowSelectionModel:f,onRowSelectionModelChange:r=>s(r),disableRowSelectionOnClick:!0,checkboxSelection:!0,slotProps:{toolbar:{setSkills:v,setRowModesModel:B}},editMode:"row",rowModesModel:M,onRowModesModelChange:de,onRowEditStop:ee,processRowUpdate:te})})})]})},ae=t=>{const{children:x,value:p,index:h,...v}=t;return e.jsx("div",{role:"tabpanel",hidden:p!==h,id:`simple-tabpanel-${h}`,"aria-labelledby":`simple-tab-${h}`,...v,children:p===h&&e.jsx(c,{children:x})})};function oe(t){return{id:`simple-tab-${t}`,"aria-controls":`simple-tabpanel-${t}`}}const At=()=>{var Ee,Re;const t=y(),x=Rt(),h=(Ee=It().state)==null?void 0:Ee.inspectionTypeId,[v,f]=o.useState(""),[s,b]=o.useState(""),[C,D]=o.useState(0),[w,U]=o.useState([]),z=o.useRef([]),[F,E]=o.useState([]),[M,B]=o.useState({smallEffort:"",mediumEffort:"",largeEffort:""}),[l,K]=o.useState({Small:{inspector:"",reviewer:"",approver:""},Medium:{inspector:"",reviewer:"",approver:""},Large:{inspector:"",reviewer:"",approver:""}}),[ue,de]=o.useState([]),[ee,te]=o.useState([]),[q,ne]=o.useState(1),[H,r]=o.useState(10),[d,S]=o.useState(0),[$,V]=o.useState(0),[N,_]=o.useState(!1),[xe,je]=o.useState(1),[ce,ve]=o.useState(10),[xt,ct]=o.useState(0),[ht,mt]=o.useState(0),[gt,be]=o.useState(!1),{snack:Ut,setSnack:Ce}=o.useContext(Tt),[it,Se]=o.useState(!1),[Me,we]=o.useState(""),[he,pt]=o.useState([]),[ft,jt]=o.useState({occurence:"NOREPEAT"}),vt=(g,a)=>{D(a)};o.useEffect(()=>{(async()=>{const a=await L.get("http://52.140.64.177:9090/getAllControlTypesForCase");pt(a==null?void 0:a.data)})()},[]),o.useEffect(()=>{try{_(!0),(async()=>{var u,I,T,G,k,O;const a=await L({method:"get",url:`http://52.140.64.177:9090/getSkills?page=${q-1}&size=${H}`});U((u=a==null?void 0:a.data)==null?void 0:u.content),z.current=(I=a==null?void 0:a.data)==null?void 0:I.content,ne(((T=a==null?void 0:a.data)==null?void 0:T.number)+1),r((G=a==null?void 0:a.data)==null?void 0:G.size),S((k=a==null?void 0:a.data)==null?void 0:k.totalPages),V((O=a==null?void 0:a.data)==null?void 0:O.totalElements),_(!1)})()}catch(g){console.log(g)}},[q,H]),o.useEffect(()=>{try{be(!0),(async()=>{var u,I,T,G,k;const a=await L({method:"get",url:`http://52.140.64.177:9090/getAlltheEntitiesDetails?page=${xe-1}&size=${ce}`});de((u=a==null?void 0:a.data)==null?void 0:u.content),je(((I=a==null?void 0:a.data)==null?void 0:I.number)+1),ve((T=a==null?void 0:a.data)==null?void 0:T.size),ct((G=a==null?void 0:a.data)==null?void 0:G.totalPages),mt((k=a==null?void 0:a.data)==null?void 0:k.totalElements),be(!1)})()}catch(g){console.log(g)}},[xe,ce]),o.useEffect(()=>{h&&(async()=>{var I,T,G,k,O,J,Q,X,Z,A;const a=await L({method:"get",url:`http://52.140.64.177:9090/getInspectionTypeById/${h}`}),u=a==null?void 0:a.data;f((I=u==null?void 0:u.inspectionTypePrimaryDetails)==null?void 0:I.name),we((T=u==null?void 0:u.inspectionTypePrimaryDetails)==null?void 0:T.controlTypeId),b((G=u==null?void 0:u.inspectionTypePrimaryDetails)==null?void 0:G.threshold),B({smallEffort:(k=u==null?void 0:u.inspectionTypePrimaryDetails)==null?void 0:k.low,mediumEffort:(O=u==null?void 0:u.inspectionTypePrimaryDetails)==null?void 0:O.medium,largeEffort:(J=u==null?void 0:u.inspectionTypePrimaryDetails)==null?void 0:J.high}),E((X=(Q=u==null?void 0:u.inspectionTypePrimaryDetails)==null?void 0:Q.skills)==null?void 0:X.map(n=>n==null?void 0:n.skillId)),te((Z=u==null?void 0:u.entityDetailsDTOs)==null?void 0:Z.map(n=>n==null?void 0:n.entityId)),(A=u==null?void 0:u.inspectionSLA)==null||A.map(n=>{(n==null?void 0:n.entitySize)==="Small"&&K(W=>({...W,Small:{inspector:{goal:n==null?void 0:n.inspectorGoal,deadline:n==null?void 0:n.inspectorDeadline},reviewer:{goal:n==null?void 0:n.reviewerGoal,deadline:n==null?void 0:n.reviewerDeadline},approver:{goal:n==null?void 0:n.approverGoal,deadline:n==null?void 0:n.approverDeadline}}})),(n==null?void 0:n.entitySize)==="Medium"&&K(W=>({...W,Medium:{inspector:{goal:n==null?void 0:n.inspectorGoal,deadline:n==null?void 0:n.inspectorDeadline},reviewer:{goal:n==null?void 0:n.reviewerGoal,deadline:n==null?void 0:n.reviewerDeadline},approver:{goal:n==null?void 0:n.approverGoal,deadline:n==null?void 0:n.approverDeadline}}})),(n==null?void 0:n.entitySize)==="Large"&&K(W=>({...W,Large:{inspector:{goal:n==null?void 0:n.inspectorGoal,deadline:n==null?void 0:n.inspectorDeadline},reviewer:{goal:n==null?void 0:n.reviewerGoal,deadline:n==null?void 0:n.reviewerDeadline},approver:{goal:n==null?void 0:n.approverGoal,deadline:n==null?void 0:n.approverDeadline}}}))})})()},[h]);const bt=async()=>{var g,a,u,I,T,G,k,O,J,Q,X,Z,A,n,W,Ie,Te,Ge,ke,De,ze,Fe,Ne,Pe,$e,Oe,We,Be,He,Ye,Ue,Ke,Ve,_e,qe,Je,Qe,Xe,Ze,Ae,Le,ye;Se(!0);try{let se=[],et=[];(g=z.current)==null||g.map(j=>{F!=null&&F.includes(j==null?void 0:j.skillId)&&se.push(j==null?void 0:j.skillId)});const Ct=(a=z.current)==null?void 0:a.map(j=>j==null?void 0:j.skillId),me=F==null?void 0:F.filter(j=>!Ct.includes(j));w==null||w.map(j=>{me!=null&&me.includes(j.skillId)&&et.push(j==null?void 0:j.skill)});const P=await L({method:"post",url:`http://52.140.64.177:9090/addEditInspectionType?action=${h?"edit":"save"}`,data:{inspectionTypePrimaryDetails:{name:v,ins_type_id:h,controlTypeId:Me,threshold:s,isActive:!0,high:`${M==null?void 0:M.largeEffort}:00`,medium:`${M==null?void 0:M.mediumEffort}:00`,low:`${M==null?void 0:M.smallEffort}:00`,entitySize:"",newSkills:et,existingSkills:se},inspectionTypeSLA:{entitySizes:{Small:{inspectorGoal:(I=(u=l==null?void 0:l.Small)==null?void 0:u.inspector)==null?void 0:I.goal,inspectorDeadline:(G=(T=l==null?void 0:l.Small)==null?void 0:T.inspector)==null?void 0:G.deadline,reviewerGoal:(O=(k=l==null?void 0:l.Small)==null?void 0:k.reviewer)==null?void 0:O.goal,reviewerDeadline:(Q=(J=l==null?void 0:l.Small)==null?void 0:J.reviewer)==null?void 0:Q.deadline,approverGoal:(Z=(X=l==null?void 0:l.Small)==null?void 0:X.approver)==null?void 0:Z.goal,approverDeadline:(n=(A=l==null?void 0:l.Small)==null?void 0:A.approver)==null?void 0:n.deadline},Large:{inspectorGoal:(Ie=(W=l==null?void 0:l.Large)==null?void 0:W.inspector)==null?void 0:Ie.goal,inspectorDeadline:(Ge=(Te=l==null?void 0:l.Large)==null?void 0:Te.inspector)==null?void 0:Ge.deadline,reviewerGoal:(De=(ke=l==null?void 0:l.Large)==null?void 0:ke.reviewer)==null?void 0:De.goal,reviewerDeadline:(Fe=(ze=l==null?void 0:l.Large)==null?void 0:ze.reviewer)==null?void 0:Fe.deadline,approverGoal:(Pe=(Ne=l==null?void 0:l.Large)==null?void 0:Ne.approver)==null?void 0:Pe.goal,approverDeadline:(Oe=($e=l==null?void 0:l.Large)==null?void 0:$e.approver)==null?void 0:Oe.deadline},Medium:{inspectorGoal:(Be=(We=l==null?void 0:l.Medium)==null?void 0:We.inspector)==null?void 0:Be.goal,inspectorDeadline:(Ye=(He=l==null?void 0:l.Medium)==null?void 0:He.inspector)==null?void 0:Ye.deadline,reviewerGoal:(Ke=(Ue=l==null?void 0:l.Medium)==null?void 0:Ue.reviewer)==null?void 0:Ke.goal,reviewerDeadline:(_e=(Ve=l==null?void 0:l.Medium)==null?void 0:Ve.reviewer)==null?void 0:_e.deadline,approverGoal:(Je=(qe=l==null?void 0:l.Medium)==null?void 0:qe.approver)==null?void 0:Je.goal,approverDeadline:(Xe=(Qe=l==null?void 0:l.Medium)==null?void 0:Qe.approver)==null?void 0:Xe.deadline}}},inspectionTypeEntity:{entityIds:ee}}});((Ae=(Ze=P==null?void 0:P.data)==null?void 0:Ze.status)==null?void 0:Ae.toUpperCase())==="SUCCESS"?(Ce({open:!0,message:(Le=P==null?void 0:P.data)==null?void 0:Le.message,severity:"success"}),x("/configurations/inspection-type")):Ce({open:!0,message:(ye=P==null?void 0:P.data)==null?void 0:ye.message,severity:"error"})}catch(se){console.log(se)}finally{Se(!1)}};return e.jsx(e.Fragment,{children:e.jsxs(c,{sx:{borderRadius:"20px",background:`${t.palette.colors[2]} 0% 0% no-repeat padding-box`,my:2,mr:2,p:2.5,boxShadow:`inset 0px 0px 6px ${t.palette.colors[3]}`,opacity:1},children:[e.jsx(pe,{sx:{color:t.palette.colors[21],fontSize:"14px",fontWeight:600},startIcon:e.jsx(Gt,{}),onClick:()=>x(-1),children:"Back"}),e.jsxs(c,{sx:{background:`${t.palette.colors[1]} 0% 0% no-repeat padding-box`,borderRadius:"10px",opacity:1},children:[e.jsx(c,{sx:{py:2,px:2.5},children:e.jsxs(m,{variant:"h4",fontWeight:600,children:[h?"Edit":"Add"," Inspection Type"]})}),e.jsx(fe,{}),e.jsxs(c,{sx:{py:2,px:2.5,"& .MuiTypography-root":{fontSize:"12px",color:t.palette.colors[21]},".MuiTabs-root .MuiButtonBase-root":{fontSize:"14px",fontWeight:400,mr:"2px"},".MuiTabs-scroller":{borderBottom:`1px solid ${t.palette.colors[22]}`}},children:[it&&e.jsx(kt,{}),e.jsxs(i,{container:!0,spacing:3,children:[e.jsxs(i,{size:4,children:[e.jsxs(m,{children:["Inspection Type",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx(R,{size:"small",fullWidth:!0,className:"inputFields",value:v,onChange:g=>f(g.target.value)})]}),e.jsxs(i,{size:4,children:[e.jsxs(m,{children:["Control Types",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx(Dt,{className:"inputFields",fullWidth:!0,children:e.jsx(re,{value:Me,onChange:g=>we(g.target.value),fullWidth:!0,children:he==null?void 0:he.map(g=>e.jsx(Y,{value:g==null?void 0:g.controlTypeId,children:g==null?void 0:g.controlTypeName}))})})]}),e.jsxs(i,{size:4,children:[e.jsxs(m,{children:["Threshold",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx(R,{size:"small",fullWidth:!0,className:"inputFields",value:s,onChange:g=>b(g.target.value)})]})]}),e.jsxs(zt,{value:C,onChange:vt,"aria-label":"List of cases",TabIndicatorProps:{style:{backgroundColor:"#4C8B92"}},sx:{mt:3,"& .MuiTabs-scroller":{height:"40px"}},children:[e.jsx(le,{label:"Primary Details",...oe(0)}),e.jsx(le,{label:"SLAs (in days)",...oe(1)}),e.jsx(le,{label:"Entity Mapping",...oe(2)}),e.jsx(le,{label:"Manage Periodicity",...oe(3)})]}),e.jsx(ae,{value:C,index:0,children:e.jsx(Yt,{inspectionType:v,primarydetails:M,setPrimaryDetails:B,skills:w,setSkills:U,selectedSkills:F,setSelectedSkills:E,skillPage:q,setSkillPage:ne,skillPageSize:H,setSkillPageSize:r,totalSkillPages:d,totalSkillRecords:$,loadingSkills:N})}),e.jsx(ae,{value:C,index:1,children:e.jsx(Ht,{SLAData:l,setSLAData:K})}),e.jsx(ae,{value:C,index:2,children:e.jsx(Wt,{entities:ue,selectedEntities:ee,setSelectedEntities:te,entityPage:xe,setEntityPage:je,entityPageSize:ce,setEntityPageSize:ve,totalEntityPages:xt,totalEntityRecords:ht,loadingEntities:gt})}),e.jsx(ae,{value:C,index:3,children:e.jsx(Bt,{periodicity:ft,setPeriodicity:jt})}),e.jsx(c,{sx:{display:"flex",justifyContent:"flex-end",mt:2},children:e.jsx(pe,{sx:{backgroundColor:t.palette.colors[11],textTransform:"none",borderRadius:"20px",width:"100px",height:"40px","&:hover":{backgroundColor:(Re=t.palette.colors)==null?void 0:Re[11]}},onClick:bt,children:"Submit"})})]})]})]})})};export{At as default};
