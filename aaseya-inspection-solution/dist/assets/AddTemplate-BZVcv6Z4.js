import{b as H,a as K,u as U,r as o,S as q,o as p,j as t,B as d,e as b,K as J,T as u,D as $,L as Q,G as f,i as V,h as X,M as Y,a5 as Z,N as ee,a6 as te}from"./index-CsrR-wrF.js";import{A as ae}from"./PlaylistAddOutlined-CpSMRKtR.js";/* empty css                    */const de=()=>{var A;const l=H(),m=K(),c=(A=U().state)==null?void 0:A.templateId,[j,k]=o.useState(""),[S,y]=o.useState(""),[N,T]=o.useState([]),[h,z]=o.useState([]),[I,v]=o.useState([]),[g,D]=o.useState(1),[C,M]=o.useState(10),[B,E]=o.useState(0),[F,L]=o.useState(0),[P,w]=o.useState(!1),[W,G]=o.useState(!1),{snack:oe,setSnack:R}=o.useContext(q),_=[{field:"checklistCategoryName",headerName:"Category",flex:1},{field:"isActive",headerName:"Status",flex:.2,renderCell:a=>{var e;return t.jsx(t.Fragment,{children:(e=a.row)!=null&&e.isActive?t.jsxs(t.Fragment,{children:[t.jsx(d,{sx:{display:"inline-block",width:"8px",height:"8px",borderRadius:"50%",background:"#03911A",mr:1}}),"Active"]}):t.jsxs(t.Fragment,{children:[t.jsx(d,{sx:{display:"inline-block",width:"8px",height:"8px",borderRadius:"50%",background:"#D54B4B",mr:1}}),"Inactive"]})})}},{field:"action",headerName:"Action",flex:.2,renderCell:a=>t.jsx(b,{sx:{color:`${l.palette.colors[11]}`},onClick:()=>{var e;m("/checklist-management/category/add",{state:{categoryId:(e=a.row)==null?void 0:e.checklistCatId}})},children:"Edit"})}];o.useEffect(()=>{(async()=>{const e=await p({method:"get",url:"http://52.140.64.177:9090/getAllInspectionTypes"});z(e==null?void 0:e.data)})()},[]),o.useEffect(()=>{try{w(!0),(async()=>{var r,i,s,x,n;const e=await p({method:"get",url:`http://52.140.64.177:9090/getAllCheckListCategory?page=${g-1}&size=${C}`});T((r=e==null?void 0:e.data)==null?void 0:r.content),D(((i=e==null?void 0:e.data)==null?void 0:i.number)+1),M((s=e==null?void 0:e.data)==null?void 0:s.size),E((x=e==null?void 0:e.data)==null?void 0:x.totalPages),L((n=e==null?void 0:e.data)==null?void 0:n.totalElements),w(!1)})()}catch(a){console.log(a)}},[g,C]),o.useEffect(()=>{c&&(async()=>{var r,i,s,x;const e=await p({method:"get",url:`http://52.140.64.177:9090/getTemplateDetails/${c}`});k((r=e==null?void 0:e.data)==null?void 0:r.templateName),y((i=e==null?void 0:e.data)==null?void 0:i.insTypeId),v((x=(s=e==null?void 0:e.data)==null?void 0:s.categories)==null?void 0:x.map(n=>n==null?void 0:n.categoryId))})()},[c]);const O=async()=>{var a,e,r,i;G(!0);try{const s=await p({method:"post",url:"http://52.140.64.177:9090/AddEditTemplate",data:{action:c?"edit":"add",template_id:c,template_name:j,version:"1.0",isActive:!0,ins_type_id:S,checklist_ids:I}});((e=(a=s==null?void 0:s.data)==null?void 0:a.status)==null?void 0:e.toUpperCase())==="SUCCESS"?(R({open:!0,message:(r=s==null?void 0:s.data)==null?void 0:r.message,severity:"success"}),m("/checklist-management/template")):R({open:!0,message:(i=s==null?void 0:s.data)==null?void 0:i.message,severity:"error"})}catch(s){console.log(s)}finally{G(!1)}};return t.jsxs(d,{sx:{borderRadius:"20px",background:`${l.palette.colors[2]} 0% 0% no-repeat padding-box`,my:2,mr:2,p:2.5,boxShadow:`inset 0px 0px 6px ${l.palette.colors[3]}`,opacity:1},children:[t.jsx(b,{sx:{color:l.palette.colors[21],fontSize:"14px",fontWeight:600},startIcon:t.jsx(J,{}),onClick:()=>m(-1),children:"Back"}),t.jsxs(d,{sx:{background:`${l.palette.colors[1]} 0% 0% no-repeat padding-box`,borderRadius:"10px",opacity:1},children:[t.jsx(d,{sx:{py:2,px:2.5},children:t.jsxs(u,{variant:"h4",fontWeight:600,children:[c?"Edit":"Add"," Template"]})}),t.jsx($,{}),t.jsxs(d,{sx:{py:2,px:2.5,"& .MuiTypography-root":{fontSize:"12px",color:l.palette.colors[21]}},children:[W&&t.jsx(Q,{}),t.jsxs(f,{container:!0,spacing:3,className:"inputFields",children:[t.jsxs(f,{size:4,children:[t.jsxs(u,{children:["Template Name",t.jsx("span",{style:{color:"red"},children:"*"})]}),t.jsx(V,{size:"small",fullWidth:!0,value:j,onChange:a=>k(a.target.value)})]}),t.jsxs(f,{size:4,children:[t.jsxs(u,{children:["Inspection Type",t.jsx("span",{style:{color:"red"},children:"*"})]}),t.jsx(X,{className:"newCaseFields",fullWidth:!0,sx:{height:"37px"},value:S,onChange:a=>y(a.target.value),children:h==null?void 0:h.map(a=>t.jsx(Y,{value:a==null?void 0:a.id,children:a==null?void 0:a.name},a==null?void 0:a.id))})]})]}),t.jsx($,{sx:{my:2}}),t.jsx(u,{sx:{fontSize:"14px",color:l.palette.colors[21],mb:1},children:"Category"}),t.jsxs(d,{className:"addButtonContainer",onClick:()=>{m("/checklist-management/category/add")},children:[t.jsx(ae,{sx:{mr:1}}),t.jsx(u,{className:"typographyFontWeight",children:"Add Category"})]}),t.jsx(d,{sx:{py:2,height:"400px",".MuiDataGrid-columnHeader":{backgroundColor:`${l.palette.colors[18]}`},".MuiDataGrid-root":{borderRadius:"10px 10px 0px 0px",border:"0px !important",borderColor:"white !important","--DataGrid-rowBorderColor":"#ffffff"},".MuiDataGrid-main":{borderRadius:"10px 10px 0px 0px"},"& .MuiDataGrid-columnsContainer, .MuiDataGrid-cell":{borderBottom:"0px !important",borderTop:"0px !important"}," .MuiDataGrid-row":{border:`1px solid ${l.palette.colors[22]}`,borderRadius:"6px",my:"1px"}," .MuiDataGrid-overlay":{border:`1px solid ${l.palette.colors[22]}`,borderRadius:"6px",my:"1px"},".MuiDataGrid-columnHeaders .MuiDataGrid-scrollbarFiller":{backgroundColor:`${l.palette.colors[18]}`}," .MuiDataGrid-scrollbar":{display:"none"},".MuiDataGrid-footerContainer":{borderTop:"0px"},".MuiDataGrid-selectedRowCount":{display:"none"}},children:t.jsx(Z,{columns:_,rows:N,loading:P,getRowId:a=>a==null?void 0:a.checklistCatId,checkboxSelection:!0,slots:{baseCheckbox:ee,pagination:()=>t.jsx(te,{page:g,setPage:D,pageSize:C,setPageSize:M,totalPages:B,totalRecords:F})},rowSelectionModel:I,onRowSelectionModelChange:a=>v(a),disableRowSelectionOnClick:!0})}),t.jsx(b,{mt:2,sx:{backgroundColor:l.palette.colors[11],textTransform:"none",borderRadius:"20px",width:"100px",height:"40px",display:"flex",marginLeft:"auto","&:hover":{backgroundColor:l.palette.colors[11]}},onClick:O,children:"Submit"})]})]})]})};export{de as default};
