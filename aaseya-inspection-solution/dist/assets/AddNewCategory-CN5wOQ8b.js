import{b as q,a as J,u as Q,r as o,S as V,o as p,j as t,B as d,e as w,K as X,T as n,D as T,L as Y,G as y,i as D,a5 as Z,N as ee,a6 as te}from"./index-CsrR-wrF.js";import{A as ae}from"./PlaylistAddOutlined-CpSMRKtR.js";/* empty css                    */const ce=()=>{var N;const r=q(),h=J(),c=(N=Q().state)==null?void 0:N.categoryId,[C,v]=o.useState(""),[k,G]=o.useState(""),[f,M]=o.useState(""),[E,A]=o.useState([]),[b,$]=o.useState([]),[j,I]=o.useState(1),[S,R]=o.useState(10),[B,W]=o.useState(0),[F,L]=o.useState(0),[P,z]=o.useState(!1),[U,x]=o.useState(!1),{snack:oe,setSnack:m}=o.useContext(V),O=[{field:"checklist_name",headerName:"Checklist Item",flex:1},{field:"answer_type",headerName:"Answer Type",flex:.3},{field:"action",headerName:"Actions",flex:.2,renderCell:s=>t.jsx(w,{sx:{color:`${r.palette.colors[11]}`},onClick:()=>{var e;h("/checklist-management/items/add",{state:{checklistItemId:(e=s.row)==null?void 0:e.checklist_id}})},children:"Edit"})}];o.useEffect(()=>{try{z(!0),(async()=>{var i,l,a,g,u;const e=await p({method:"get",url:`http://52.140.64.177:9090/getAllCheckListitems?page=${j-1}&size=${S}`});A((i=e==null?void 0:e.data)==null?void 0:i.content),I(((l=e==null?void 0:e.data)==null?void 0:l.number)+1),R((a=e==null?void 0:e.data)==null?void 0:a.size),W((g=e==null?void 0:e.data)==null?void 0:g.totalPages),L((u=e==null?void 0:e.data)==null?void 0:u.totalElements),z(!1)})()}catch(s){console.log(s)}},[j,S]),o.useEffect(()=>{c&&(async()=>{var i,l,a,g,u;const e=await p({method:"get",url:`http://52.140.64.177:9090/getChecklistCategory/${c}`});G((i=e==null?void 0:e.data)==null?void 0:i.checklist_category_name),v((l=e==null?void 0:e.data)==null?void 0:l.category_weightage_local),M((a=e==null?void 0:e.data)==null?void 0:a.category_threshold_local),$((u=(g=e==null?void 0:e.data)==null?void 0:g.checklist_items)==null?void 0:u.map(_=>_==null?void 0:_.checklist_id))})()},[c]);const H=async()=>{var s,e,i,l;x(!0);try{const a=await p({method:"post",url:"http://52.140.64.177:9090/addChecklistCategory",data:{checklist_category_name:k,category_threshold_local:f,category_weightage_local:C,checklist_ids:b}});((e=(s=a==null?void 0:a.data)==null?void 0:s.status)==null?void 0:e.toUpperCase())==="SUCCESS"?(m({open:!0,message:(i=a==null?void 0:a.data)==null?void 0:i.message,severity:"success"}),h("/checklist-management/category")):m({open:!0,message:(l=a==null?void 0:a.data)==null?void 0:l.message,severity:"error"})}catch(a){console.error("Error submitting data:",a)}finally{x(!1)}},K=async()=>{var s,e,i,l;x(!0);try{const a=await p({method:"put",url:"http://52.140.64.177:9090/updateChecklistCategory",data:{checklist_cat_id:c,checklist_category_name:k,category_threshold_local:f,category_weightage_local:C,checklist_ids:b}});((e=(s=a==null?void 0:a.data)==null?void 0:s.status)==null?void 0:e.toUpperCase())==="SUCCESS"?(m({open:!0,message:(i=a==null?void 0:a.data)==null?void 0:i.message,severity:"success"}),h("/checklist-management/category")):m({open:!0,message:(l=a==null?void 0:a.data)==null?void 0:l.message,severity:"error"})}catch(a){console.error("Error submitting data:",a)}finally{x(!1)}};return t.jsx(t.Fragment,{children:t.jsxs(d,{sx:{borderRadius:"20px",background:`${r.palette.colors[2]} 0% 0% no-repeat padding-box`,my:2,mr:2,p:2.5,boxShadow:`inset 0px 0px 6px ${r.palette.colors[3]}`,opacity:1},children:[t.jsx(w,{sx:{color:r.palette.colors[21],fontSize:"14px",fontWeight:600},startIcon:t.jsx(X,{}),onClick:()=>h(-1),children:"Back"}),t.jsxs(d,{sx:{background:`${r.palette.colors[1]} 0% 0% no-repeat padding-box`,borderRadius:"10px",opacity:1},children:[t.jsx(d,{sx:{py:2,px:2.5},children:t.jsxs(n,{variant:"h4",fontWeight:600,children:[c?"Edit":"Add"," Category"]})}),t.jsx(T,{}),t.jsxs(d,{sx:{py:2,px:2.5,"& .MuiTypography-root":{fontSize:"12px",color:r.palette.colors[21]}},children:[U&&t.jsx(Y,{}),t.jsxs(y,{container:!0,spacing:3,className:"inputFields",children:[t.jsxs(y,{size:4,children:[t.jsxs(n,{children:["Category Name",t.jsx("span",{style:{color:"red"},children:"*"})]}),t.jsx(D,{size:"small",fullWidth:!0,value:k,onChange:s=>G(s.target.value)})]}),t.jsxs(y,{size:4,children:[t.jsxs(n,{children:["Weightage",t.jsx("span",{style:{color:"red"},children:"*"})]}),t.jsx(D,{size:"small",fullWidth:!0,value:C,onChange:s=>v(s.target.value)})]}),t.jsxs(y,{size:4,children:[t.jsxs(n,{children:["Threshold",t.jsx("span",{style:{color:"red"},children:"*"})]}),t.jsx(D,{size:"small",fullWidth:!0,value:f,className:"newCaseFields",onChange:s=>M(s.target.value)})]})]}),t.jsx(T,{sx:{my:2}}),t.jsx(n,{sx:{fontSize:"14px",color:r.palette.colors[21],mb:1},children:"Checklist Item"}),t.jsxs(d,{className:"addButtonContainer",onClick:()=>{h("/checklist-management/items/add")},children:[t.jsx(ae,{sx:{mr:1}}),t.jsx(n,{className:"typographyFontWeight",children:"Add Checklist Item"})]}),t.jsx(d,{sx:{py:2,height:"400px",".MuiDataGrid-columnHeader":{backgroundColor:`${r.palette.colors[18]}`},".MuiDataGrid-root":{borderRadius:"10px 10px 0px 0px",border:"0px !important",borderColor:"white !important","--DataGrid-rowBorderColor":"#ffffff"},".MuiDataGrid-main":{borderRadius:"10px 10px 0px 0px"},"& .MuiDataGrid-columnsContainer, .MuiDataGrid-cell":{borderBottom:"0px !important",borderTop:"0px !important"}," .MuiDataGrid-row":{border:`1px solid ${r.palette.colors[22]}`,borderRadius:"6px",my:"1px"}," .MuiDataGrid-overlay":{border:`1px solid ${r.palette.colors[22]}`,borderRadius:"6px",my:"1px"},".MuiDataGrid-columnHeaders .MuiDataGrid-scrollbarFiller":{backgroundColor:`${r.palette.colors[18]}`}," .MuiDataGrid-scrollbar":{display:"none"},".MuiDataGrid-footerContainer":{borderTop:"0px"},".MuiDataGrid-selectedRowCount":{display:"none"}},children:t.jsx(Z,{columns:O,rows:E,loading:P,checkboxSelection:!0,getRowId:s=>s==null?void 0:s.checklist_id,rowSelectionModel:b,onRowSelectionModelChange:s=>$(s),disableRowSelectionOnClick:!0,slots:{baseCheckbox:ee,pagination:()=>t.jsx(te,{page:j,setPage:I,pageSize:S,setPageSize:R,totalPages:B,totalRecords:F})}})}),t.jsx(w,{mt:2,sx:{backgroundColor:r.palette.colors[11],textTransform:"none",borderRadius:"20px",width:"100px",height:"40px",display:"flex",marginLeft:"auto","&:hover":{backgroundColor:r.palette.colors[11]}},onClick:()=>{c?K():H()},children:"Submit"})]})]})]})})};export{ce as default};
