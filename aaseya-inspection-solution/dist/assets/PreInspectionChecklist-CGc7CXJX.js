import{b as M,a as G,r,S as P,j as t,B as c,e as p,K as A,T,I as E,a1 as N,O as z,D as O,a5 as F,N as H,a6 as K,o as j}from"./index-CsrR-wrF.js";import{C as U,B as W}from"./BlockOutlined-CAsOTEjX.js";const Q=()=>{const a=M(),x=G(),[I,S]=r.useState([]),[u,b]=r.useState(1),[h,k]=r.useState(10),[v,D]=r.useState(0),[B,R]=r.useState(0),[w,g]=r.useState(!1),{snack:L,setSnack:m}=r.useContext(P),[i,C]=r.useState([]),$=[{field:"name",headerName:"Pre Inspection Checklist",flex:1},{field:"inspectionType",headerName:"Inspection Type",flex:1},{field:"isActive",headerName:"Status",flex:.5,renderCell:e=>{var s;return t.jsx(t.Fragment,{children:(s=e.row)!=null&&s.isActive?t.jsxs(t.Fragment,{children:[t.jsx(c,{sx:{display:"inline-block",width:"8px",height:"8px",borderRadius:"50%",background:"#03911A",mr:1}}),"Active"]}):t.jsxs(t.Fragment,{children:[t.jsx(c,{sx:{display:"inline-block",width:"8px",height:"8px",borderRadius:"50%",background:"#D54B4B",mr:1}}),"Inactive"]})})}},{field:"action",headerName:"Actions",flex:.3,renderCell:e=>t.jsx(p,{sx:{color:`${a.palette.colors[11]}`},onClick:()=>{var s;x("/checklist-management/pre-inspection-checklist/add",{state:{preInspectionChecklistId:(s=e.row)==null?void 0:s.checklistId}})},children:"Edit"})}],f=async()=>{var s,n,l,d,o;const e=await j({method:"get",url:`http://52.140.64.177:9090/getAllPreInspections?page=${u-1}&size=${h}`});S((s=e==null?void 0:e.data)==null?void 0:s.content),b(((n=e==null?void 0:e.data)==null?void 0:n.number)+1),k((l=e==null?void 0:e.data)==null?void 0:l.size),D((d=e==null?void 0:e.data)==null?void 0:d.totalPages),R((o=e==null?void 0:e.data)==null?void 0:o.totalElements),g(!1)};r.useEffect(()=>{try{g(!0),f()}catch(e){console.log(e)}},[u,h]);const y=async e=>{var s,n,l,d;try{if((i==null?void 0:i.length)===0){m({open:!0,message:"No rows selected",severity:"error"});return}g(!0);const o=await j({method:"post",url:"http://52.140.64.177:9090/updateIsActive",data:{inputType:"PreInspectionChecklist",action:e,ids:i}});((n=(s=o==null?void 0:o.data)==null?void 0:s.status)==null?void 0:n.toUpperCase())==="SUCCESS"?m({open:!0,message:(l=o==null?void 0:o.data)==null?void 0:l.message,severity:"success"}):m({open:!0,message:(d=o==null?void 0:o.data)==null?void 0:d.message,severity:"error"}),f(),C([])}catch(o){console.log(o)}};return t.jsxs(c,{sx:{borderRadius:"20px",background:`${a.palette.colors[2]} 0% 0% no-repeat padding-box`,my:2,mr:2,p:2.5,boxShadow:`inset 0px 0px 6px ${a.palette.colors[3]}`,opacity:1},children:[t.jsx(p,{sx:{color:a.palette.colors[21],fontSize:"14px",fontWeight:600},startIcon:t.jsx(A,{}),onClick:()=>x(-1),children:"Back"}),t.jsxs(c,{sx:{background:`${a.palette.colors[1]} 0% 0% no-repeat padding-box`,borderRadius:"10px",opacity:1},children:[t.jsxs(c,{sx:{py:2,px:2.5,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx(T,{variant:"h4",fontWeight:600,children:"Pre Inspection Checklist"}),t.jsxs(c,{sx:{display:"flex",gap:3},children:[t.jsx(E,{sx:{boxShadow:`0px 1px 6px ${a.palette.colors[3]}`,borderRadius:"50%",opacity:1,width:"40px",height:"40px"},children:t.jsx(N,{sx:{color:`${a.palette.colors[8]}`}})}),t.jsx(p,{onClick:()=>x("/checklist-management/pre-inspection-checklist/add"),variant:"contained",startIcon:t.jsx(z,{}),sx:{backgroundColor:`${a.palette.colors[11]}`,color:"#ffffff",borderRadius:"20px",width:"150px",height:"40px","&:hover":{backgroundColor:a.palette.colors[11]}},children:"Add New"})]})]}),t.jsx(O,{}),i.length>0&&t.jsxs(c,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:2,px:2,py:1.7,mt:2,mx:2.5,borderRadius:"10px 10px 0px 0px",backgroundColor:`${a.palette.colors[18]}`,".MuiButtonBase-root":{backgroundColor:"#EBEBEB",borderRadius:"6px",color:"#00060A",px:3}},children:[t.jsx(p,{size:"small",startIcon:t.jsx(U,{sx:{color:"#03911A"}}),onClick:()=>y("activate"),children:"Activate"}),t.jsx(p,{size:"small",startIcon:t.jsx(W,{sx:{color:"#D54B4B"}}),onClick:()=>y("deactivate"),children:"Deactivate"})]}),t.jsx(c,{sx:{pb:2,px:2.5,pt:i.length>0?0:2,height:"400px",".MuiDataGrid-columnHeader":{backgroundColor:`${a.palette.colors[18]}`,display:i.length>0?"none":"block"},".MuiDataGrid-root":{borderRadius:"10px 10px 0px 0px",border:"0px !important",borderColor:"white !important","--DataGrid-rowBorderColor":"#ffffff"},".MuiDataGrid-main":{borderRadius:"10px 10px 0px 0px"},"& .MuiDataGrid-columnsContainer, .MuiDataGrid-cell":{borderBottom:"0px !important",borderTop:"0px !important"}," .MuiDataGrid-row":{border:`1px solid ${a.palette.colors[22]}`,borderRadius:"6px",my:"1px"}," .MuiDataGrid-overlay":{border:`1px solid ${a.palette.colors[22]}`,borderRadius:"6px",my:"1px"},".MuiDataGrid-columnHeaders .MuiDataGrid-scrollbarFiller":{backgroundColor:`${a.palette.colors[18]}`}," .MuiDataGrid-scrollbar":{display:"none"},".MuiDataGrid-footerContainer":{borderTop:"0px"},".MuiDataGrid-selectedRowCount":{display:"none"}},children:t.jsx(F,{columns:$,rows:I,loading:w,checkboxSelection:!0,getRowId:e=>e==null?void 0:e.checklistId,rowSelectionModel:i,onRowSelectionModelChange:e=>C(e),slots:{baseCheckbox:H,pagination:()=>t.jsx(K,{page:u,setPage:b,pageSize:h,setPageSize:k,totalPages:v,totalRecords:B})},disableRowSelectionOnClick:!0})})]})]})};export{Q as default};
