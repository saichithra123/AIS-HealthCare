import{b as Z,a as T,u as tt,r as l,S as at,o as g,j as a,B as x,e as C,K as et,T as f,D as L,L as ot,G as D,i as rt,h as lt,a7 as w,M as st,N as O,ap as it,aD as dt,a5 as nt,a6 as xt}from"./index-CsrR-wrF.js";/* empty css                    */import{C as ct}from"./Close-CoWB75cj.js";const pt=()=>{var B,U,A;const d=Z(),R=T(),u=(B=tt().state)==null?void 0:B.skillId,[W,y]=l.useState([]),[n,H]=l.useState([]),[i,p]=l.useState([]),[M,b]=l.useState(!1),S=l.useRef(null),[v,G]=l.useState([]),[I,$]=l.useState(""),{snack:ht,setSnack:z}=l.useContext(at),[K,F]=l.useState(!1),[j,N]=l.useState(1),[k,E]=l.useState(10),[_,V]=l.useState(0),[q,J]=l.useState(0),[Q,P]=l.useState(!1),X=[{field:"userName",headerName:"Name",flex:.3},{field:"role",headerName:"Role",flex:.3},{field:"skills",headerName:"Skills",flex:1,renderCell:e=>{var t,o;return a.jsx(a.Fragment,{children:(o=(t=e.row)==null?void 0:t.skills)==null?void 0:o.map(s=>a.jsx(w,{sx:{borderRadius:"4px",mr:1,height:"26px"},label:s},s))})}}];l.useEffect(()=>{(async()=>{const t=await g({method:"get",url:"http://52.140.64.177:9090/getAllInspectionTypes"});H(t==null?void 0:t.data)})()},[]),l.useEffect(()=>{try{P(!0),(async()=>{var o,s,r,h,m;const t=await g({method:"get",url:`http://52.140.64.177:9090/getAllUsersWithSkills?page=${j-1}&size=${k}`});y((o=t==null?void 0:t.data)==null?void 0:o.content),N(((s=t==null?void 0:t.data)==null?void 0:s.number)+1),E((r=t==null?void 0:t.data)==null?void 0:r.size),V((h=t==null?void 0:t.data)==null?void 0:h.totalPages),J((m=t==null?void 0:t.data)==null?void 0:m.totalElements),P(!1)})()}catch(e){console.log(e)}},[j,k]),l.useEffect(()=>{u&&(async()=>{var o,s,r,h,m;const t=await g({method:"get",url:`http://52.140.64.177:9090/getSkillDetails/${u}`});$((o=t==null?void 0:t.data)==null?void 0:o.name),p((r=(s=t==null?void 0:t.data)==null?void 0:s.inspectionTypeDTO)==null?void 0:r.map(c=>c==null?void 0:c.ins_type_id)),G((m=(h=t==null?void 0:t.data)==null?void 0:h.usersDTO)==null?void 0:m.map(c=>c==null?void 0:c.userID))})()},[u]);const Y=async()=>{var e,t,o,s;F(!0);try{const r=await g({method:"post",url:"http://52.140.64.177:9090/AddEditSkill",data:{skillId:u,skillName:I,inspectionTypeIds:i,userIds:v,action:u?"edit":"add"}});((t=(e=r==null?void 0:r.data)==null?void 0:e.status)==null?void 0:t.toUpperCase())==="SUCCESS"?(z({open:!0,message:(o=r==null?void 0:r.data)==null?void 0:o.message,severity:"success"}),R("/configurations/skills")):z({open:!0,message:(s=r==null?void 0:r.data)==null?void 0:s.message,severity:"error"})}catch(r){console.log(r)}finally{F(!1)}};return a.jsx(a.Fragment,{children:a.jsxs(x,{sx:{borderRadius:"20px",background:`${d.palette.colors[2]} 0% 0% no-repeat padding-box`,my:2,mr:2,p:2.5,boxShadow:`inset 0px 0px 6px ${d.palette.colors[3]}`,opacity:1},children:[a.jsx(C,{sx:{color:d.palette.colors[21],fontSize:"14px",fontWeight:600},startIcon:a.jsx(et,{}),onClick:()=>R(-1),children:"Back"}),a.jsxs(x,{sx:{background:`${d.palette.colors[1]} 0% 0% no-repeat padding-box`,borderRadius:"10px",opacity:1},children:[a.jsx(x,{sx:{py:2,px:2.5},children:a.jsx(f,{variant:"h4",fontWeight:600,children:"Add Skill"})}),a.jsx(L,{}),a.jsxs(x,{sx:{py:2,px:2.5,"& .MuiTypography-root":{fontSize:"12px",color:d.palette.colors[21]}},children:[K&&a.jsx(ot,{}),a.jsxs(D,{container:!0,spacing:3,children:[a.jsxs(D,{size:{xs:12,md:6,lg:4},children:[a.jsxs(f,{children:["Skills",a.jsx("span",{style:{color:"red"},children:"*"})]}),a.jsx(rt,{size:"small",fullWidth:!0,value:I,className:"inputFields",onChange:e=>$(e.target.value),sx:{height:"100%"}})]}),a.jsxs(D,{size:{xs:12,md:6,lg:4},className:"inputFields",children:[a.jsxs(f,{children:["Inspection Type",a.jsx("span",{style:{color:"red"},children:"*"})]}),a.jsx(lt,{labelId:"demo-multiple-checkbox-label",id:"demo-multiple-checkbox",multiple:!0,fullWidth:!0,value:i,onChange:e=>{b(!1),p(typeof e.target.value=="string"?e.target.value.split(","):e.target.value)},endAdornment:a.jsx(a.Fragment,{children:(i==null?void 0:i.length)>0&&a.jsx(ct,{sx:{color:"#5F6368",cursor:"pointer",fontSize:"15px",mr:1},onClick:()=>p([])})}),renderValue:e=>a.jsxs(x,{sx:{display:"flex"},children:[a.jsx(x,{sx:{display:"flex",gap:.5,overflow:"hidden"," .MuiChip-root":{height:"26px",borderRadius:"4px"}},children:e==null?void 0:e.map(t=>{var o;return a.jsx(w,{label:(o=n==null?void 0:n.find(s=>(s==null?void 0:s.id)===t))==null?void 0:o.name},t)})}),e.length>2&&a.jsxs(C,{ref:S,sx:{color:`${d.palette.colors[11]}`,size:"small",height:"26px"},onMouseLeave:()=>{b(!1)},onMouseEnter:t=>{b(!0)},children:["+",e.length-2," more"]})]}),sx:{height:"40px",width:"100%"},children:n==null?void 0:n.map(e=>a.jsxs(st,{value:e==null?void 0:e.id,children:[a.jsx(O,{checked:i==null?void 0:i.includes(e==null?void 0:e.id)}),a.jsx(it,{primary:e==null?void 0:e.name})]},e==null?void 0:e.id))})]}),M&&(i==null?void 0:i.length)>2&&a.jsx(dt,{sx:{pointerEvents:"none",boxShadow:"0px","& .MuiPaper-root":{boxShadow:"none"}},open:M,anchorReference:"anchorPosition",anchorPosition:{top:((U=S.current)==null?void 0:U.getBoundingClientRect().bottom)+10,left:((A=S.current)==null?void 0:A.getBoundingClientRect().left)-100},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},disableRestoreFocus:!0,children:a.jsx(x,{sx:{p:1," .MuiChip-root":{height:"26px",borderRadius:"4px"},width:"270px",backgroundColor:"#F2F6F6",display:"flex",gap:.5,flexWrap:"wrap"},children:i==null?void 0:i.map(e=>{var t;return a.jsx(w,{label:(t=n==null?void 0:n.find(o=>(o==null?void 0:o.id)===e))==null?void 0:t.name},e)})})})]}),a.jsx(L,{sx:{my:2}}),a.jsx(f,{sx:{fontSize:"14px",color:d.palette.colors[21],mb:1},children:"User"}),a.jsx(x,{sx:{height:"400px",".MuiDataGrid-columnHeader":{backgroundColor:`${d.palette.colors[18]}`},".MuiDataGrid-root":{borderRadius:"10px 10px 0px 0px",border:"0px !important",borderColor:"white !important","--DataGrid-rowBorderColor":"#ffffff"},".MuiDataGrid-main":{borderRadius:"10px 10px 0px 0px"},"& .MuiDataGrid-columnsContainer, .MuiDataGrid-cell":{borderBottom:"0px !important",borderTop:"0px !important"}," .MuiDataGrid-row":{border:`1px solid ${d.palette.colors[22]}`,borderRadius:"6px",my:"1px"}," .MuiDataGrid-overlay":{border:`1px solid ${d.palette.colors[22]}`,borderRadius:"6px",my:"1px"},".MuiDataGrid-columnHeaders .MuiDataGrid-scrollbarFiller":{backgroundColor:`${d.palette.colors[18]}`}," .MuiDataGrid-scrollbar":{display:"none"},".MuiDataGrid-footerContainer":{borderTop:"0px"},".MuiDataGrid-selectedRowCount":{display:"none"}},children:a.jsx(nt,{columns:X,rows:W,checkboxSelection:!0,loading:Q,slots:{baseCheckbox:O,pagination:()=>a.jsx(xt,{page:j,setPage:N,pageSize:k,setPageSize:E,totalPages:_,totalRecords:q})},getRowId:e=>e.userID,disableRowSelectionOnClick:!0,rowSelectionModel:v,onRowSelectionModelChange:e=>G(e)})}),a.jsx(C,{mt:2,sx:{backgroundColor:d.palette.colors[11],textTransform:"none",borderRadius:"20px",width:"100px",height:"40px",display:"flex",marginLeft:"auto","&:hover":{backgroundColor:d.palette.colors[11]}},onClick:Y,children:"Submit"})]})]})]})})};export{pt as default};
