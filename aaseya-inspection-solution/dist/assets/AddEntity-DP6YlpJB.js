import{J as lt,T as u,r as m,_ as it,aP as dt,j as e,a8 as ct,a0 as xt,aQ as ut,c as ht,b as X,S as nt,e as W,aR as pt,G as h,I as rt,D as oe,aS as mt,E as ft,H as te,B as z,a5 as re,aT as jt,i as G,F as q,h as _,M as I,u as se,f as gt,A as Ct,g as bt,d as ot,a as yt,o as ae,K as St,a7 as at,N as Nt,ap as Mt,aD as zt}from"./index-CsrR-wrF.js";import{C as st}from"./Close-CoWB75cj.js";/* empty css                    */import{G as It}from"./GoogleMap-CEX4WJJD.js";import"./index.modern-B3mHbnex.js";/* empty css            */const Bt=t=>{const{classes:C}=t;return xt({root:["root"]},ut,C)},Gt=lt(u,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(t,C)=>C.root})({padding:"16px 24px",flex:"0 0 auto"}),At=m.forwardRef(function(C,A){const l=it({props:C,name:"MuiDialogTitle"}),{className:s,id:j,...p}=l,b=l,d=Bt(b),{titleId:N=j}=m.useContext(dt);return e.jsx(Gt,{component:"h2",className:ct(d.root,s),ownerState:b,ref:A,variant:"h6",id:j??N,...p})}),kt=ht(e.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"}),"CancelOutlined"),ne=({children:t,value:C,index:A})=>e.jsx("div",{role:"tabpanel",hidden:C!==A,children:C===A&&e.jsx(z,{children:t})}),Rt=({setDocumentFiles:t,setImageFiles:C,setVideofiles:A,documentFiles:l,imageFiles:s,videoFiles:j,setDeletedAttachmentIds:p})=>{const[b,d]=m.useState(0),N=X(),[f,F]=m.useState(!1),[k,J]=m.useState([]),[y,P]=m.useState([]),[L,$]=m.useState([]),{snack:Z,setSnack:w}=m.useContext(nt),[D,U]=m.useState([]),H=[{field:"name",headerName:"Name",flex:1},{field:"reference",headerName:"Reference",flex:1},{field:"documentType",headerName:"Type",flex:1},{field:"action",headerName:"Action",renderCell:a=>e.jsx(rt,{onClick:()=>{var n,c;K((n=a.row)==null?void 0:n.id,(c=a.row)==null?void 0:c.attachmentId)},children:e.jsx(st,{sx:{color:"#d54b4b",fontWeight:"bold"}})})}];m.useEffect(()=>{l==null||l.map(a=>{var i;const n={attachmentId:a==null?void 0:a.attachmentId,id:a==null?void 0:a.fileName,name:a==null?void 0:a.fileName,reference:a==null?void 0:a.fileName,documentType:(i=a==null?void 0:a.fileName)==null?void 0:i.split(".").pop()},c=k.filter(x=>(x==null?void 0:x.name)===(n==null?void 0:n.name));(c==null?void 0:c.length)===0&&(n!=null&&n.id)&&J(x=>[...x,n])}),s==null||s.map(a=>{var i;const n={attachmentId:a==null?void 0:a.attachmentId,id:a==null?void 0:a.fileName,name:a==null?void 0:a.fileName,reference:a==null?void 0:a.fileName,documentType:(i=a==null?void 0:a.fileName)==null?void 0:i.split(".").pop()},c=y.filter(x=>(x==null?void 0:x.name)===(n==null?void 0:n.name));(c==null?void 0:c.length)===0&&(n!=null&&n.id)&&P(x=>[...x,n])}),j==null||j.map(a=>{var i;const n={attachmentId:a==null?void 0:a.attachmentId,id:a==null?void 0:a.fileName,name:a==null?void 0:a.fileName,reference:a==null?void 0:a.fileName,documentType:(i=a==null?void 0:a.fileName)==null?void 0:i.split(".").pop()},c=L.filter(x=>(x==null?void 0:x.name)===(n==null?void 0:n.name));(c==null?void 0:c.length)===0&&(n!=null&&n.id)&&$(x=>[...x,n])})},[l,s,j]);const Y=(a,n)=>{d(n)},V=a=>{var c;const n=a.target.files[0];if(console.log(n),n){const i={id:n.name,name:n.name,reference:n.name,documentType:(c=n.name)==null?void 0:c.split(".").pop(),file:n};if(b===0){const x=k.filter(S=>(S==null?void 0:S.name)===(i==null?void 0:i.name));if((x==null?void 0:x.length)>0){w({open:!0,message:"File already exists",severity:"error"});return}J(S=>[...S,i])}if(b===1){const x=y.filter(S=>(S==null?void 0:S.name)===(i==null?void 0:i.name));if((x==null?void 0:x.length)>0){w({open:!0,message:"File already exists",severity:"error"});return}P(S=>[...S,i])}if(b===2){const x=L.filter(S=>(S==null?void 0:S.name)===(i==null?void 0:i.name));if((x==null?void 0:x.length)>0){w({open:!0,message:"File already exists",severity:"error"});return}$(S=>[...S,i])}}},le=()=>{F(!1)},ee=()=>{t(k),C(y),A(L),p(D),F(!1)},K=(a,n)=>{b===0&&J(c=>c==null?void 0:c.filter(i=>(i==null?void 0:i.id)!==a)),b===1&&P(c=>c==null?void 0:c.filter(i=>(i==null?void 0:i.id)!==a)),b===2&&$(c=>c==null?void 0:c.filter(i=>(i==null?void 0:i.id)!==a)),n&&U(c=>[...c,n])};return e.jsxs(e.Fragment,{children:[e.jsx(W,{variant:"outlined",sx:{border:"1px solid #4C8B92",borderRadius:"20px",height:"40px",color:"#4C8B92",px:4,"&:hover":{backgroundColor:"#EAF3F5"}},onClick:()=>F(!0),children:"Entity Registration"}),e.jsxs(pt,{open:f,onClose:()=>F(!1),fullWidth:!0,maxWidth:"md",sx:{borderRadius:"20px !important",".MuiPaper-root":{borderRadius:"20px !important"},".MuiDialogContent-root":{scrollbarWidth:"none"}},children:[e.jsx(At,{children:e.jsxs(h,{container:!0,sx:{justifyContent:"space-between",alignItems:"center"},children:[e.jsx(u,{fontSize:"20px",fontWeight:600,children:"Entity Registartion"}),e.jsx(rt,{"aria-label":"close",onClick:()=>F(!1),children:e.jsx(kt,{})})]})}),e.jsx(oe,{}),e.jsxs(mt,{sx:{".MuiTabs-root .MuiButtonBase-root":{fontSize:"18px",fontWeight:600,mr:"2px"},".MuiTabs-scroller":{borderBottom:`1px solid ${N.palette.colors[22]}`}},children:[e.jsxs(ft,{value:b,onChange:Y,TabIndicatorProps:{style:{backgroundColor:"#4C8B92"}},children:[e.jsx(te,{label:"Upload Documents"}),e.jsx(te,{label:"Upload Images"}),e.jsx(te,{label:"Upload Videos"})]}),e.jsxs(ne,{value:b,index:0,children:[e.jsxs(z,{sx:{display:"flex",alignItems:"center",my:2},children:[e.jsx(u,{sx:{mr:2,fontSize:"16px",fontWeight:500},children:"Upload Document(s)"}),e.jsxs(W,{variant:"outlined",component:"label",sx:{borderColor:"#4C8B92",color:"#4C8B92",textTransform:"none",borderRadius:"20px",width:"140px",height:"40px","&:hover":{borderColor:"#4C8B92",backgroundColor:"transparent"}},children:["Browse",e.jsx("input",{type:"file",hidden:!0,onChange:V})]})]}),e.jsx(z,{sx:{py:2,mb:2.5,".MuiDataGrid-columnHeader":{backgroundColor:`${N.palette.colors[18]}`},".MuiDataGrid-root":{borderRadius:"10px 10px 0px 0px",border:"0px !important",borderColor:"white !important","--DataGrid-rowBorderColor":"#ffffff"},".MuiDataGrid-main":{borderRadius:"10px 10px 0px 0px"},"& .MuiDataGrid-columnsContainer, .MuiDataGrid-cell":{borderBottom:"0px !important",borderTop:"0px !important"}," .MuiDataGrid-row":{border:`1px solid ${N.palette.colors[22]}`,borderRadius:"6px",my:"1px"}," .MuiDataGrid-overlay":{border:`1px solid ${N.palette.colors[22]}`,borderRadius:"6px",my:"1px"},".MuiDataGrid-columnHeaders .MuiDataGrid-scrollbarFiller":{backgroundColor:`${N.palette.colors[18]}`}," .MuiDataGrid-scrollbar":{display:"none"},".MuiDataGrid-footerContainer":{borderTop:"0px"},".MuiDataGrid-selectedRowCount":{display:"none"}},children:e.jsx(re,{columns:H,rows:k,hideFooter:!0,disableSelectionOnClick:!0})})]}),e.jsxs(ne,{value:b,index:1,children:[e.jsxs(z,{sx:{display:"flex",alignItems:"center",my:2},children:[e.jsx(u,{sx:{mr:2,fontSize:"16px",fontWeight:500},children:"Upload Image(s)"}),e.jsxs(W,{variant:"outlined",component:"label",sx:{borderColor:"#4C8B92",color:"#4C8B92",textTransform:"none",borderRadius:"20px",width:"140px",height:"40px","&:hover":{borderColor:"#4C8B92",backgroundColor:"transparent"}},children:["Browse",e.jsx("input",{type:"file",hidden:!0,onChange:V})]})]}),e.jsx(z,{sx:{py:2,mb:2.5,".MuiDataGrid-columnHeader":{backgroundColor:`${N.palette.colors[18]}`},".MuiDataGrid-root":{borderRadius:"10px 10px 0px 0px",border:"0px !important",borderColor:"white !important","--DataGrid-rowBorderColor":"#ffffff"},".MuiDataGrid-main":{borderRadius:"10px 10px 0px 0px"},"& .MuiDataGrid-columnsContainer, .MuiDataGrid-cell":{borderBottom:"0px !important",borderTop:"0px !important"}," .MuiDataGrid-row":{border:`1px solid ${N.palette.colors[22]}`,borderRadius:"6px",my:"1px"}," .MuiDataGrid-overlay":{border:`1px solid ${N.palette.colors[22]}`,borderRadius:"6px",my:"1px"},".MuiDataGrid-columnHeaders .MuiDataGrid-scrollbarFiller":{backgroundColor:`${N.palette.colors[18]}`}," .MuiDataGrid-scrollbar":{display:"none"},".MuiDataGrid-footerContainer":{borderTop:"0px"},".MuiDataGrid-selectedRowCount":{display:"none"}},children:e.jsx(re,{columns:H,rows:y,hideFooter:!0,disableSelectionOnClick:!0})})]}),e.jsxs(ne,{value:b,index:2,children:[e.jsxs(z,{sx:{display:"flex",alignItems:"center",my:2},children:[e.jsx(u,{sx:{mr:2,fontSize:"16px",fontWeight:500},children:"Upload Video(s)"}),e.jsxs(W,{variant:"outlined",component:"label",sx:{borderColor:"#4C8B92",color:"#4C8B92",textTransform:"none",borderRadius:"20px",width:"140px",height:"40px","&:hover":{borderColor:"#4C8B92",backgroundColor:"transparent"}},children:["Browse",e.jsx("input",{type:"file",hidden:!0,onChange:V})]})]}),e.jsx(z,{sx:{py:2,mb:2.5,".MuiDataGrid-columnHeader":{backgroundColor:`${N.palette.colors[18]}`},".MuiDataGrid-root":{borderRadius:"10px 10px 0px 0px",border:"0px !important",borderColor:"white !important","--DataGrid-rowBorderColor":"#ffffff"},".MuiDataGrid-main":{borderRadius:"10px 10px 0px 0px"},"& .MuiDataGrid-columnsContainer, .MuiDataGrid-cell":{borderBottom:"0px !important",borderTop:"0px !important"}," .MuiDataGrid-row":{border:`1px solid ${N.palette.colors[22]}`,borderRadius:"6px",my:"1px"}," .MuiDataGrid-overlay":{border:`1px solid ${N.palette.colors[22]}`,borderRadius:"6px",my:"1px"},".MuiDataGrid-columnHeaders .MuiDataGrid-scrollbarFiller":{backgroundColor:`${N.palette.colors[18]}`}," .MuiDataGrid-scrollbar":{display:"none"},".MuiDataGrid-footerContainer":{borderTop:"0px"},".MuiDataGrid-selectedRowCount":{display:"none"}},children:e.jsx(re,{columns:H,rows:L,hideFooter:!0,disableSelectionOnClick:!0})})]})]}),e.jsxs(jt,{sx:{p:3},children:[e.jsx(W,{variant:"outlined",sx:{border:"1px solid #4C8B92",borderRadius:"20px",height:"40px",color:"#4C8B92",px:4,mr:2,"&:hover":{backgroundColor:"#EAF3F5"}},onClick:le,children:"Cancel"}),e.jsx(W,{sx:{backgroundColor:"#4C8B92",color:"#FFFFFF",px:5,height:"40px",borderRadius:"20px","&:hover":{backgroundColor:"#4C8B92"}},onClick:ee,children:"Save"})]})]})]})},vt=({siteDetails:t,setSiteDetails:C})=>{const A=X(),[l,s]=m.useState(null),j=p=>{const{name:b,value:d}=p.target;C({...t,[b]:d})};return m.useEffect(()=>{l!=null&&l.formatted_address&&C(p=>({...p,siteAddress:l.formatted_address}))},[l,C]),e.jsxs(z,{sx:{"& .MuiTypography-root":{fontSize:"12px",color:A.palette.colors[21]}},children:[e.jsxs(h,{container:!0,spacing:3,rowSpacing:2.5,columnSpacing:2.5,children:[e.jsxs(h,{size:4,children:[e.jsx(u,{children:"Site Name"}),e.jsx(G,{fullWidth:!0,size:"small",className:"inputFields",name:"siteName",value:t==null?void 0:t.siteName,onChange:j})]}),e.jsxs(h,{size:4,children:[e.jsx(u,{children:"Site ID"}),e.jsx(G,{size:"small",fullWidth:!0,name:"siteId",value:t==null?void 0:t.siteId,className:"inputFields",onChange:j,disabled:!0})]}),e.jsxs(h,{size:4,children:[e.jsx(u,{children:"Site Manager"}),e.jsx(G,{size:"small",fullWidth:!0,name:"siteManager",value:t==null?void 0:t.siteManager,className:"inputFields",onChange:j})]}),e.jsxs(h,{size:4,className:"inputFields",children:[e.jsx(u,{children:"Site Type"}),e.jsx(q,{fullWidth:!0,children:e.jsxs(_,{size:"small",value:t==null?void 0:t.siteType,name:"siteType",onChange:j,children:[e.jsx(I,{value:"Commercial",children:"Commercial"}),e.jsx(I,{value:"Residential",children:"Residential"}),e.jsx(I,{value:"Industrial",children:"Industrial"})]})})]}),e.jsxs(h,{size:8,children:[e.jsx(u,{children:"Site Address"}),e.jsx(G,{size:"small",fullWidth:!0,name:"siteAddress",value:t==null?void 0:t.siteAddress,className:"inputFields",onChange:j})]})]}),e.jsxs(h,{container:!0,mt:3,sx:{height:"400px"},children:[e.jsx(u,{children:"Site GPS"}),e.jsx(It,{setNewEntityAddress:s})]}),e.jsx(oe,{sx:{my:2}}),e.jsx(h,{container:!0,spacing:3,children:e.jsxs(h,{size:8,children:[e.jsx(u,{children:"Comments"}),e.jsx(G,{size:"small",fullWidth:!0,name:"siteComments",value:t==null?void 0:t.siteComments,className:"inputFields",onChange:j})]})})]})},Tt=({licenseDetails:t,setLicenseDetails:C})=>{var j;const A=X();(j=se().state)==null||j.entityId;const s=p=>{const{name:b,value:d}=p.target;C({...t,[b]:d})};return e.jsx(z,{sx:{"& .MuiTypography-root":{fontSize:"12px",color:A.palette.colors[21]}},children:e.jsxs(h,{container:!0,spacing:2.5,children:[e.jsxs(h,{size:4,children:[e.jsx(u,{children:"License Type"}),e.jsx(q,{fullWidth:!0,className:"inputFields",children:e.jsxs(_,{size:"small",value:t==null?void 0:t.licenseType,name:"licenseType",onChange:s,children:[e.jsx(I,{value:"Business",children:"Business"}),e.jsx(I,{value:"Professional",children:"Professional"}),e.jsx(I,{value:"Operational",children:"Operational"})]})})]}),e.jsxs(h,{size:4,children:[e.jsx(u,{children:"License Name"}),e.jsx(G,{size:"small",fullWidth:!0,className:"inputFields",value:t==null?void 0:t.licenseName,name:"licenseName",onChange:s})]}),e.jsxs(h,{size:4,children:[e.jsx(u,{children:"License Number"}),e.jsx(G,{size:"small",fullWidth:!0,className:"inputFields",value:t==null?void 0:t.licenseNumber,name:"licenseNumber",onChange:s})]}),e.jsxs(h,{size:4,children:[e.jsx(u,{children:"Issuing Authority"}),e.jsx(G,{size:"small",fullWidth:!0,className:"inputFields",value:t==null?void 0:t.issuingAuthority,name:"issuingAuthority",onChange:s})]}),e.jsxs(h,{size:4,children:[e.jsx(u,{children:"Status"}),e.jsx(q,{fullWidth:!0,className:"inputFields",children:e.jsxs(_,{size:"small",value:t==null?void 0:t.status,name:"status",onChange:s,children:[e.jsx(I,{value:"Active",children:"Active"}),e.jsx(I,{value:"Expired",children:"Expired"}),e.jsx(I,{value:"Suspended",children:"Suspended"})]})})]}),e.jsxs(h,{size:4,children:[e.jsx(u,{children:"Associate Location / Site"}),e.jsx(G,{size:"small",fullWidth:!0,value:t==null?void 0:t.licenseLocation,className:"inputFields",name:"licenseLocation",onChange:s})]}),e.jsxs(h,{size:8,children:[e.jsx(u,{children:"Comments"}),e.jsx(G,{size:"small",fullWidth:!0,value:t==null?void 0:t.licenseComments,className:"inputFields",name:"licenseComments",onChange:s})]})]})})},Et=({productDetails:t,setProductDetails:C})=>{const A=X();se();const l=s=>{const{name:j,value:p}=s.target;C({...t,[j]:p})};return e.jsx(z,{sx:{"& .MuiTypography-root":{fontSize:"12px",color:A.palette.colors[21]}},children:e.jsxs(h,{container:!0,spacing:2.5,children:[e.jsxs(h,{size:4,children:[e.jsx(u,{children:"Product Name"}),e.jsx(G,{fullWidth:!0,size:"small",className:"inputFields",value:t==null?void 0:t.productName,name:"productName",onChange:l})]}),e.jsxs(h,{size:4,children:[e.jsx(u,{children:"Product Code"}),e.jsx(G,{size:"small",fullWidth:!0,value:t==null?void 0:t.productCode,className:"inputFields",name:"productCode",onChange:l})]}),e.jsxs(h,{size:4,className:"inputFields",children:[e.jsx(u,{children:"Product Category"}),e.jsx(q,{fullWidth:!0,children:e.jsxs(_,{size:"small",fullWidth:!0,value:t==null?void 0:t.productCategory,className:"inputFields",name:"productCategory",onChange:l,children:[e.jsx(I,{value:"Electronics",children:"Electronics"}),e.jsx(I,{value:"Food and Bewerages",children:"Food and Bewerages"}),e.jsx(I,{value:"Pharmaceuticals",children:"Pharmaceuticals"}),e.jsx(I,{value:"Clothing and Textiles",children:"Clothing and Textiles"})]})})]}),e.jsxs(h,{size:4,children:[e.jsx(u,{children:"Product Expiry Date"}),e.jsx(gt,{dateAdapter:Ct,children:e.jsx(bt,{className:"inputFields",value:t!=null&&t.productExpiryDate?ot(t.productExpiryDate):null,name:"productExpiryDate",onChange:s=>C({...t,productExpiryDate:s}),format:"DD MMM YYYY",sx:{width:"100%"}})})]}),e.jsxs(h,{size:4,children:[e.jsx(u,{children:"Batch / Serial Number"}),e.jsx(G,{size:"small",fullWidth:!0,value:t==null?void 0:t.productBatch,className:"inputFields",name:"productBatch",onChange:l})]}),e.jsxs(h,{size:4,children:[e.jsx(u,{children:"Manufacturer"}),e.jsx(G,{size:"small",fullWidth:!0,value:t==null?void 0:t.productManufacturer,className:"inputFields",name:"productManufacturer",onChange:l})]}),e.jsxs(h,{size:4,children:[e.jsx(u,{children:"Address"}),e.jsx(G,{size:"small",fullWidth:!0,value:t==null?void 0:t.productAddress,className:"inputFields",name:"productAddress",onChange:l})]}),e.jsxs(h,{size:8,children:[e.jsx(u,{children:"Description / Notes"}),e.jsx(G,{size:"small",fullWidth:!0,value:t==null?void 0:t.productDescription,className:"inputFields",name:"productDescription",onChange:l})]})]})})},Ot=()=>{var x,S,ie;const t=X(),C=yt(),l=(x=se().state)==null?void 0:x.entityId,[s,j]=m.useState(0),[p,b]=m.useState({}),[d,N]=m.useState({}),[f,F]=m.useState({}),[k,J]=m.useState([]),[y,P]=m.useState([]),[L,$]=m.useState(!1),Z=m.useRef(null),[w,D]=m.useState([]),[U,H]=m.useState([]),[Y,V]=m.useState([]),{snack:le,setSnack:ee}=m.useContext(nt),[K,a]=m.useState([]),n=o=>{const M=o.target.value;j(M)};m.useEffect(()=>{try{(async()=>{const M=await ae({method:"get",url:"http://52.140.64.177:9090/getAllInspectionTypes"});J(M==null?void 0:M.data)})()}catch(o){console.log(o)}},[]),m.useEffect(()=>{l&&(async()=>{var E,O,v,g,de,ce,xe,ue,he,pe,me,fe,je,ge,Ce,be,ye,Se,Ne,Me,ze,Ie,Be,Ge,Ae,ke,Re,ve,Te,Ee,Fe,We,Pe,we,Le,$e,Oe,Ue,He,Ye,Ve,_e,Je,Ke,Qe,qe,Xe,Ze,De,et,tt;const M=["pdf","doc","docx","odt","rtx","txt","ppt","pptx","csv","xls","xlsx","md"],R=["jpg","jpeg","gif","bmp","tif","tiff","webp"],T=["mp4","avi","webm","mpeg","mpg","ogg"];try{const r=await ae.get(`http://52.140.64.177:9090/getEntityRegistrationDetailsbyEntityID?entityId=${l}`);j((E=r==null?void 0:r.data)==null?void 0:E.entityType),P((v=(O=r==null?void 0:r.data)==null?void 0:O.inspectionTypes)==null?void 0:v.map(B=>B==null?void 0:B.ins_type_id)),((de=(g=r==null?void 0:r.data)==null?void 0:g.entityType)==null?void 0:de.toLowerCase())==="site"&&b({siteName:(xe=(ce=r==null?void 0:r.data)==null?void 0:ce.site)==null?void 0:xe.siteName,siteManager:(he=(ue=r==null?void 0:r.data)==null?void 0:ue.site)==null?void 0:he.siteManager,siteAddress:(me=(pe=r==null?void 0:r.data)==null?void 0:pe.site)==null?void 0:me.siteAddress,siteType:(je=(fe=r==null?void 0:r.data)==null?void 0:fe.site)==null?void 0:je.siteType,siteComments:(Ce=(ge=r==null?void 0:r.data)==null?void 0:ge.site)==null?void 0:Ce.comments,siteId:l}),((ye=(be=r==null?void 0:r.data)==null?void 0:be.entityType)==null?void 0:ye.toLowerCase())==="product"&&N({productName:(Ne=(Se=r==null?void 0:r.data)==null?void 0:Se.product)==null?void 0:Ne.productName,productCode:(ze=(Me=r==null?void 0:r.data)==null?void 0:Me.product)==null?void 0:ze.productCode,productCategory:(Be=(Ie=r==null?void 0:r.data)==null?void 0:Ie.product)==null?void 0:Be.productCategory,productExpiryDate:(Ae=(Ge=r==null?void 0:r.data)==null?void 0:Ge.product)==null?void 0:Ae.productExpiryDate,productBatch:(Re=(ke=r==null?void 0:r.data)==null?void 0:ke.product)==null?void 0:Re.serialNumber,productManufacturer:(Te=(ve=r==null?void 0:r.data)==null?void 0:ve.product)==null?void 0:Te.manufacturer,productDescription:(Fe=(Ee=r==null?void 0:r.data)==null?void 0:Ee.product)==null?void 0:Fe.notes,productAddress:(Pe=(We=r==null?void 0:r.data)==null?void 0:We.product)==null?void 0:Pe.productAddress}),((Le=(we=r==null?void 0:r.data)==null?void 0:we.entityType)==null?void 0:Le.toLowerCase())==="license"&&F({licenseType:(Oe=($e=r==null?void 0:r.data)==null?void 0:$e.license)==null?void 0:Oe.licenseType,licenseName:(He=(Ue=r==null?void 0:r.data)==null?void 0:Ue.license)==null?void 0:He.licenseName,licenseNumber:(Ve=(Ye=r==null?void 0:r.data)==null?void 0:Ye.license)==null?void 0:Ve.licenseNumber,issuingAuthority:(Je=(_e=r==null?void 0:r.data)==null?void 0:_e.license)==null?void 0:Je.issuingAuthority,status:(Qe=(Ke=r==null?void 0:r.data)==null?void 0:Ke.license)==null?void 0:Qe.status,licenseLocation:(Xe=(qe=r==null?void 0:r.data)==null?void 0:qe.license)==null?void 0:Xe.associateLocationOrSite,licenseComments:(De=(Ze=r==null?void 0:r.data)==null?void 0:Ze.license)==null?void 0:De.comments}),(tt=(et=r==null?void 0:r.data)==null?void 0:et.entityAttachments)==null||tt.map(B=>{M!=null&&M.includes(B==null?void 0:B.fileType)&&D(Q=>[...Q,B]),R!=null&&R.includes(B==null?void 0:B.fileType)&&H(Q=>[...Q,B]),T!=null&&T.includes(B==null?void 0:B.fileType)&&V(Q=>[...Q,B])})}catch(r){console.log(r)}})()},[l]);const c=()=>{switch(s){case"Site":return e.jsx(vt,{siteDetails:p,setSiteDetails:b});case"Product":return e.jsx(Et,{productDetails:d,setProductDetails:N});case"License":return e.jsx(Tt,{licenseDetails:f,setLicenseDetails:F});default:return null}},i=async()=>{var o,M,R,T;try{const E=new FormData;let O;s==="Site"&&(O={action:l?"edit":"Save",entityId:l,entityType:s,insTypeId:y,deleteAttachmentIds:K,site:{siteName:p==null?void 0:p.siteName,siteManager:p==null?void 0:p.siteManager,siteAddress:p==null?void 0:p.siteAddress,siteType:p==null?void 0:p.siteType,comments:p==null?void 0:p.siteComments}}),s==="Product"&&(O={action:l?"edit":"Save",entityId:l,entityType:s,insTypeId:y,deleteAttachmentIds:K,product:{productName:d==null?void 0:d.productName,productCode:d==null?void 0:d.productCode,productCategory:d==null?void 0:d.productCategory,productExpiryDate:ot(d==null?void 0:d.productExpiryDate).format("YYYY-MM-DD"),serialNumber:d==null?void 0:d.productBatch,manufacturer:d==null?void 0:d.productManufacturer,notes:d==null?void 0:d.productDescription,productAddress:d==null?void 0:d.productAddress}}),s==="License"&&(O={action:l?"edit":"Save",entityId:l,entityType:s,insTypeId:y,deleteAttachmentIds:K,license:{licenseType:f==null?void 0:f.licenseType,licenseName:f==null?void 0:f.licenseName,licenseNumber:f==null?void 0:f.licenseNumber,issuingAuthority:f==null?void 0:f.issuingAuthority,status:f==null?void 0:f.status,associateLocationOrSite:f==null?void 0:f.licenseLocation,comments:f==null?void 0:f.licenseComments}}),E.append("entityRegistrationDTO",new Blob([JSON.stringify(O)],{type:"application/json"})),w==null||w.map(g=>{g!=null&&g.attachmentId||E.append("files",g==null?void 0:g.file)}),U==null||U.map(g=>{g!=null&&g.attachmentId||E.append("files",g==null?void 0:g.file)}),Y==null||Y.map(g=>{g!=null&&g.attachmentId||E.append("files",g==null?void 0:g.file)});const v=await ae.post("http://52.140.64.177:9090/entityRegistration",E);((M=(o=v==null?void 0:v.data)==null?void 0:o.status)==null?void 0:M.toUpperCase())==="SUCCESS"?(ee({open:!0,message:(R=v==null?void 0:v.data)==null?void 0:R.message,severity:"success"}),C("/entity-management")):ee({open:!0,message:(T=v==null?void 0:v.data)==null?void 0:T.message,severity:"error"})}catch(E){console.log(E)}};return e.jsxs(z,{sx:{borderRadius:"20px",background:`${t.palette.colors[2]} 0% 0% no-repeat padding-box`,my:2,mr:2,px:2.5,py:2,boxShadow:`inset 0px 0px 6px ${t.palette.colors[3]}`,opacity:1},children:[e.jsxs(z,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(W,{sx:{color:t.palette.colors[21],fontSize:"14px",fontWeight:600},startIcon:e.jsx(St,{}),onClick:()=>{s&&!l?(j(""),P([]),b({}),N({}),F({})):C(-1)},children:"Back"}),e.jsxs(u,{variant:"h4",fontWeight:600,sx:{pl:2},children:[" ","Entity Management"," "]})]}),e.jsxs(z,{sx:{background:`${t.palette.colors[1]} 0% 0% no-repeat padding-box`,borderRadius:"10px",opacity:1,paddingBottom:.4,minHeight:"400px",display:"flex",flexDirection:"column",flexGrow:1},children:[e.jsxs(z,{sx:{py:2,px:2.5,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(u,{variant:"h4",fontWeight:600,children:[l?"Edit":"Add"," Entity"," ",s&&typeof s=="string"?` - ${s}`:""]}),!!s&&e.jsx(Rt,{setDocumentFiles:D,setImageFiles:H,setVideofiles:V,documentFiles:w,imageFiles:U,videoFiles:Y,setDeletedAttachmentIds:a})]}),e.jsx(oe,{}),e.jsxs(z,{sx:{py:2,px:2.5,"& .MuiTypography-root":{fontSize:"12px",color:t.palette.colors[21]}},children:[e.jsxs(h,{container:!0,spacing:3,children:[e.jsxs(h,{size:4,className:"inputFields",children:[e.jsxs(u,{children:["Entity Type ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx(q,{fullWidth:!0,className:"configFields",children:e.jsxs(_,{value:s,onChange:n,slotProps:{input:{readOnly:!!s}},children:[e.jsx(I,{value:0,disabled:!0,children:"Select"}),e.jsx(I,{value:"Site",children:"Site"}),e.jsx(I,{value:"Product",children:"Product"}),e.jsx(I,{value:"License",children:"License"}),e.jsx(I,{value:"Others",children:"Others"})]})})]}),!!s&&e.jsxs(h,{size:4,className:"inputFields",children:[e.jsx(u,{children:"Inspection Type"}),e.jsx(_,{labelId:"demo-multiple-checkbox-label",id:"demo-multiple-checkbox",multiple:!0,value:y,onChange:o=>{$(!1),P(typeof o.target.value=="string"?o.target.value.split(","):o.target.value)},endAdornment:e.jsx(e.Fragment,{children:(y==null?void 0:y.length)>0&&e.jsx(st,{sx:{color:"#5F6368",cursor:"pointer",fontSize:"15px",mr:1},onClick:()=>P([])})}),renderValue:o=>e.jsxs(z,{sx:{display:"flex"},children:[e.jsx(z,{sx:{display:"flex",gap:.5,overflow:"hidden"," .MuiChip-root":{height:"26px",borderRadius:"4px"}},children:o==null?void 0:o.map(M=>{var R;return e.jsx(at,{label:(R=k==null?void 0:k.find(T=>(T==null?void 0:T.id)===M))==null?void 0:R.name},M)})}),(o==null?void 0:o.length)>2&&e.jsxs(W,{ref:Z,sx:{color:`${t.palette.colors[11]}`,size:"small",height:"26px"},onMouseLeave:()=>{$(!1)},onMouseEnter:M=>{$(!0)},children:["+",(o==null?void 0:o.length)-2," more"]})]}),sx:{height:"40px",width:"100%"},children:k==null?void 0:k.map(o=>e.jsxs(I,{value:o==null?void 0:o.id,children:[e.jsx(Nt,{checked:y==null?void 0:y.includes(o==null?void 0:o.id)}),e.jsx(Mt,{primary:o==null?void 0:o.name})]},o==null?void 0:o.id))})]}),L&&(y==null?void 0:y.length)>2&&e.jsx(zt,{sx:{pointerEvents:"none",boxShadow:"0px","& .MuiPaper-root":{boxShadow:"none"}},open:L,anchorReference:"anchorPosition",anchorPosition:{top:((S=Z.current)==null?void 0:S.getBoundingClientRect().bottom)+10,left:((ie=Z.current)==null?void 0:ie.getBoundingClientRect().left)-100},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},disableRestoreFocus:!0,children:e.jsx(z,{sx:{p:1," .MuiChip-root":{height:"26px",borderRadius:"4px"},width:"270px",backgroundColor:"#F2F6F6",display:"flex",gap:.5,flexWrap:"wrap"},children:y==null?void 0:y.map(o=>{var M;return e.jsx(at,{label:(M=k==null?void 0:k.find(R=>(R==null?void 0:R.id)===o))==null?void 0:M.name},o)})})})]}),e.jsx(z,{mt:3,children:c()})]}),!!s&&e.jsx(W,{sx:{backgroundColor:t.palette.colors[11],textTransform:"none",borderRadius:"20px",width:"100px",height:"40px",display:"flex",mt:2,ml:"auto",mr:2,mb:2,"&:hover":{backgroundColor:t.palette.colors[11]}},onClick:i,children:"Submit"})]})]})};export{Ot as default};
