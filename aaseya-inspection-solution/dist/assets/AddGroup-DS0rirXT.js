import{b as O,a as H,u as K,r as o,S as q,o as h,j as t,B as c,e as I,K as J,T as p,D as N,L as Q,G as b,i as $,a5 as V,N as X,a6 as Y,a7 as Z}from"./index-CsrR-wrF.js";import{A as _}from"./PlaylistAddOutlined-CpSMRKtR.js";/* empty css                    */const re=()=>{var R;const r=O(),x=H(),l=(R=K().state)==null?void 0:R.groupId,[f,S]=o.useState(""),[j,y]=o.useState(""),[v,w]=o.useState([]),[C,G]=o.useState([]),[m,D]=o.useState(1),[g,k]=o.useState(10),[z,T]=o.useState(0),[B,E]=o.useState(0),[A,U]=o.useState(!1),[F,P]=o.useState(!1),{snack:te,setSnack:M}=o.useContext(q),W=[{field:"userName",headerName:"Name",flex:.3},{field:"skills",headerName:"Skills",flex:1,renderCell:a=>{var e,i;return t.jsx(t.Fragment,{children:(i=(e=a.row)==null?void 0:e.skills)==null?void 0:i.map(d=>t.jsx(Z,{sx:{borderRadius:"4px",mr:1,height:"26px"},label:d},d))})}}];o.useEffect(()=>{try{U(!0),(async()=>{var i,d,s,u,n;const e=await h({method:"get",url:`http://52.140.64.177:9090/getAllUsersWithSkills?page=${m-1}&size=${g}&role=Inspector`});w((i=e==null?void 0:e.data)==null?void 0:i.content),D(((d=e==null?void 0:e.data)==null?void 0:d.number)+1),k((s=e==null?void 0:e.data)==null?void 0:s.size),T((u=e==null?void 0:e.data)==null?void 0:u.totalPages),E((n=e==null?void 0:e.data)==null?void 0:n.totalElements),U(!1)})()}catch(a){console.log(a)}},[m,g]),o.useEffect(()=>{l&&(async()=>{var i,d,s,u;const e=await h({method:"get",url:`http://52.140.64.177:9090/getUserGroupForEditById/${l}`});S((i=e==null?void 0:e.data)==null?void 0:i.groupName),y((d=e==null?void 0:e.data)==null?void 0:d.description),G((u=(s=e==null?void 0:e.data)==null?void 0:s.users)==null?void 0:u.map(n=>n==null?void 0:n.userID))})()},[l]);const L=async()=>{var a,e,i,d;P(!0);try{const s=await h({method:"post",url:"http://52.140.64.177:9090/AddEditUserGroup",data:{action:l?"edit":"add",groupId:l,groupName:f,description:j,userIds:C}});((e=(a=s==null?void 0:s.data)==null?void 0:a.status)==null?void 0:e.toUpperCase())==="SUCCESS"?(M({open:!0,message:(i=s==null?void 0:s.data)==null?void 0:i.message,severity:"success"}),x("/user-management/group")):M({open:!0,message:(d=s==null?void 0:s.data)==null?void 0:d.message,severity:"error"})}catch(s){console.log(s)}};return t.jsxs(c,{sx:{borderRadius:"20px",background:`${r.palette.colors[2]} 0% 0% no-repeat padding-box`,my:2,mr:2,p:2.5,boxShadow:`inset 0px 0px 6px ${r.palette.colors[3]}`,opacity:1},children:[t.jsx(I,{sx:{color:r.palette.colors[21],fontSize:"14px",fontWeight:600},startIcon:t.jsx(J,{}),onClick:()=>x(-1),children:"Back"}),t.jsxs(c,{sx:{background:`${r.palette.colors[1]} 0% 0% no-repeat padding-box`,borderRadius:"10px",opacity:1},children:[t.jsx(c,{sx:{py:2,px:2.5},children:t.jsxs(p,{variant:"h4",fontWeight:600,children:[l?"Edit":"Add"," User Group"]})}),t.jsx(N,{}),t.jsxs(c,{sx:{py:2,px:2.5,"& .MuiTypography-root":{fontSize:"12px",color:r.palette.colors[21]}},children:[F&&t.jsx(Q,{}),t.jsxs(b,{container:!0,spacing:3,className:"inputFields",children:[t.jsxs(b,{size:4,children:[t.jsxs(p,{children:["User Group Name",t.jsx("span",{style:{color:"red"},children:"*"})]}),t.jsx($,{size:"small",fullWidth:!0,value:f,onChange:a=>S(a.target.value)})]}),t.jsxs(b,{size:8,children:[t.jsx(p,{children:"Description"}),t.jsx($,{size:"small",fullWidth:!0,value:j,onChange:a=>y(a.target.value)})]})]}),t.jsx(N,{sx:{my:2}}),t.jsx(p,{sx:{fontSize:"14px",color:r.palette.colors[21],mb:1},children:"Users"}),t.jsxs(c,{className:"addButtonContainer",onClick:()=>{x("/user-management/add")},children:[t.jsx(_,{sx:{mr:1}}),t.jsx(p,{className:"typographyFontWeight",children:"Add Users"})]}),t.jsx(c,{sx:{py:2,height:"400px",".MuiDataGrid-columnHeader":{backgroundColor:`${r.palette.colors[18]}`},".MuiDataGrid-root":{borderRadius:"10px 10px 0px 0px",border:"0px !important",borderColor:"white !important","--DataGrid-rowBorderColor":"#ffffff"},".MuiDataGrid-main":{borderRadius:"10px 10px 0px 0px"},"& .MuiDataGrid-columnsContainer, .MuiDataGrid-cell":{borderBottom:"0px !important",borderTop:"0px !important"}," .MuiDataGrid-row":{border:`1px solid ${r.palette.colors[22]}`,borderRadius:"6px",my:"1px"}," .MuiDataGrid-overlay":{border:`1px solid ${r.palette.colors[22]}`,borderRadius:"6px",my:"1px"},".MuiDataGrid-columnHeaders .MuiDataGrid-scrollbarFiller":{backgroundColor:`${r.palette.colors[18]}`}," .MuiDataGrid-scrollbar":{display:"none"},".MuiDataGrid-footerContainer":{borderTop:"0px"},".MuiDataGrid-selectedRowCount":{display:"none"}},children:t.jsx(V,{columns:W,rows:v,loading:A,checkboxSelection:!0,getRowId:a=>a==null?void 0:a.userID,rowSelectionModel:C,onRowSelectionModelChange:a=>G(a),disableRowSelectionOnClick:!0,slots:{baseCheckbox:X,pagination:()=>t.jsx(Y,{page:m,setPage:D,pageSize:g,setPageSize:k,totalPages:z,totalRecords:B})}})}),t.jsx(I,{mt:2,sx:{backgroundColor:r.palette.colors[11],textTransform:"none",borderRadius:"20px",width:"100px",height:"40px",display:"flex",marginLeft:"auto","&:hover":{backgroundColor:r.palette.colors[11]}},onClick:L,children:"Submit"})]})]})]})};export{re as default};
