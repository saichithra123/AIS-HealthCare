import{b as $,a as D,u as A,r as d,S as N,o as p,j as o,B as x,e as f,K as W,T as b,D as P,G as j,i as G,h as L,a7 as E,M as O,N as K,ap as U,aD as _}from"./index-CsrR-wrF.js";import{C as H}from"./Close-CoWB75cj.js";/* empty css                    */const Y=()=>{var w,I,R;const i=$(),C=D(),c=(w=A().state)==null?void 0:w.controlTypeId,[z,F]=d.useState(""),[S,k]=d.useState(""),[l,B]=d.useState([]),[e,h]=d.useState([]),[v,u]=d.useState(!1),g=d.useRef(null),{snack:q,setSnack:y}=d.useContext(N);d.useEffect(()=>{try{(async()=>{const a=await p({method:"get",url:"http://52.140.64.177:9090/getAllInspectionTypes"});B(a==null?void 0:a.data)})()}catch(t){console.log(t)}},[]),d.useEffect(()=>{c&&(async()=>{var s,n,r;const a=await p.get(`http://52.140.64.177:9090/getControlTypeWithInspectionDetails/${c}`);k((s=a==null?void 0:a.data)==null?void 0:s.controlTypeName),h((r=(n=a==null?void 0:a.data)==null?void 0:n.inspections)==null?void 0:r.map(m=>m==null?void 0:m.ins_type_id))})()},[c]);const M=async()=>{var t,a,s,n;try{const r=await p({method:"post",url:"http://52.140.64.177:9090/AddorEditControlType",data:{controlTypeId:c,controlTypeName:S,inspectionTypeIds:e,action:c?"edit":"add"}});((a=(t=r==null?void 0:r.data)==null?void 0:t.status)==null?void 0:a.toUpperCase())==="SUCCESS"?(y({open:!0,message:(s=r==null?void 0:r.data)==null?void 0:s.message,severity:"success"}),C("/configurations/control-type")):y({open:!0,message:(n=r==null?void 0:r.data)==null?void 0:n.message,severity:"error"})}catch(r){console.log(r)}};return o.jsxs(x,{sx:{borderRadius:"20px",background:`${i.palette.colors[2]} 0% 0% no-repeat padding-box`,my:2,mr:2,px:2.5,py:2,boxShadow:`inset 0px 0px 6px ${i.palette.colors[3]}`,opacity:1},children:[o.jsx(x,{sx:{display:"flex",alignItems:"center"},children:o.jsx(f,{sx:{color:i.palette.colors[21],fontSize:"14px",fontWeight:600},startIcon:o.jsx(W,{}),onClick:()=>{z?F(""):C(-1)},children:"Back"})}),o.jsxs(x,{sx:{background:`${i.palette.colors[1]} 0% 0% no-repeat padding-box`,borderRadius:"10px",opacity:1,paddingBottom:.4,minHeight:"400px",display:"flex",flexDirection:"column",flexGrow:1},children:[o.jsxs(b,{variant:"h4",fontWeight:600,sx:{pl:2,pt:2},children:[c?"Edit":"Add"," Control Type"]}),o.jsx(P,{sx:{my:1.5}}),o.jsx(x,{sx:{py:2,px:2.5,"& .MuiTypography-root":{fontSize:"12px",color:i.palette.colors[21]}},children:o.jsxs(j,{container:!0,spacing:3,children:[o.jsxs(j,{size:4,children:[o.jsx(b,{children:"Control Type"}),o.jsx(G,{size:"small",fullWidth:!0,value:S,className:"inputFields",onChange:t=>k(t.target.value)})]}),o.jsxs(j,{size:4,className:"inputFields",children:[o.jsx(b,{children:"Inspection Type"}),o.jsx(L,{labelId:"demo-multiple-checkbox-label",id:"demo-multiple-checkbox",multiple:!0,value:e,onChange:t=>{u(!1),h(typeof t.target.value=="string"?t.target.value.split(","):t.target.value)},endAdornment:o.jsx(o.Fragment,{children:(e==null?void 0:e.length)>0&&o.jsx(H,{sx:{color:"#5F6368",cursor:"pointer",fontSize:"15px",mr:1},onClick:()=>h([])})}),renderValue:t=>o.jsxs(x,{sx:{display:"flex"},children:[o.jsx(x,{sx:{display:"flex",gap:.5,overflow:"hidden"," .MuiChip-root":{height:"26px",borderRadius:"4px"}},children:t==null?void 0:t.map(a=>{var s;return o.jsx(E,{label:(s=l==null?void 0:l.find(n=>(n==null?void 0:n.id)===a))==null?void 0:s.name},a)})}),t.length>2&&o.jsxs(f,{ref:g,sx:{color:`${i.palette.colors[11]}`,size:"small",height:"26px"},onMouseLeave:()=>{u(!1)},onMouseEnter:a=>{u(!0)},children:["+",t.length-2," more"]})]}),sx:{height:"40px",width:"100%"},children:l==null?void 0:l.map(t=>o.jsxs(O,{value:t==null?void 0:t.id,children:[o.jsx(K,{checked:e==null?void 0:e.includes(t==null?void 0:t.id)}),o.jsx(U,{primary:t==null?void 0:t.name})]},t==null?void 0:t.id))})]}),v&&(e==null?void 0:e.length)>2&&o.jsx(_,{sx:{pointerEvents:"none",boxShadow:"0px","& .MuiPaper-root":{boxShadow:"none"}},open:v,anchorReference:"anchorPosition",anchorPosition:{top:((I=g.current)==null?void 0:I.getBoundingClientRect().bottom)+10,left:((R=g.current)==null?void 0:R.getBoundingClientRect().left)-100},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},disableRestoreFocus:!0,children:o.jsx(x,{sx:{p:1," .MuiChip-root":{height:"26px",borderRadius:"4px"},width:"270px",backgroundColor:"#F2F6F6",display:"flex",gap:.5,flexWrap:"wrap"},children:e==null?void 0:e.map(t=>{var a;return o.jsx(E,{label:(a=l==null?void 0:l.find(s=>(s==null?void 0:s.id)===t))==null?void 0:a.name},t)})})})]})}),o.jsx(f,{sx:{backgroundColor:i.palette.colors[11],textTransform:"none",borderRadius:"20px",width:"100px",height:"40px",display:"flex",mt:25,ml:"auto",mr:2,mb:2,"&:hover":{backgroundColor:i.palette.colors[11]}},onClick:M,children:"Submit"})]})]})};export{Y as default};
